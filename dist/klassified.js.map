{"version":3,"sources":["node_modules/browser-pack/_prelude.js","src/globalPropertyEventEmitter.js","src/klassified.js","src/object.js","src/propertiesEventEmitter.js","src/property.js","src/testCase.js"],"names":[],"mappings":"AAAA;;;;;;;ACAA;;;;;;AAEA;;;;;kBAKe,iBAAO,iBAAP,CAAyB,UAAS,IAAT,EAAe,EAAf,EAAmB;AAC1D,IAAG,UAAH,GAAgB,UAAS,IAAT,EAAe;AAC9B,KAAG,KAAH,CAAS,IAAT;AACA,KAAG,eAAH,GAAqB,EAArB;AACA,KAAG,eAAH,GAAqB,EAArB;AACA,EAJD;;AAMA,MAAK,QAAL,GAAgB,UAAS,QAAT,EAAmB;AAClC,KAAG,eAAH,CAAmB,IAAnB,CAAwB,QAAxB;AACA,EAFD;;AAIA,MAAK,QAAL,GAAgB,UAAS,QAAT,EAAmB;AAClC,KAAG,eAAH,CAAmB,IAAnB,CAAwB,QAAxB;AACA,EAFD;;AAIA,MAAK,UAAL,GAAkB,UAAS,QAAT,EAAmB,QAAnB,EAA6B;AAC9C,KAAG,eAAH,CAAmB,OAAnB,CAA2B,UAAS,QAAT,EAAmB;AAC7C,YAAS,QAAT,EAAmB,QAAnB;AACA,GAFD;AAGA,EAJD;;AAMA,MAAK,UAAL,GAAkB,UAAS,QAAT,EAAmB,QAAnB,EAA6B,KAA7B,EAAoC;AACrD,KAAG,eAAH,CAAmB,OAAnB,CAA2B,UAAS,QAAT,EAAmB;AAC7C,YAAS,QAAT,EAAmB,QAAnB,EAA6B,KAA7B;AACA,GAFD;AAGA,EAJD;AAKA,CA1Bc,C;;;;;;;;;;ACPf;;;;AACA;;;;AACA;;;;AACA;;;;QAGC,M;QACA,Q;QACA,oB;kBAGc;AACd,yBADc;AAEd,6BAFc;AAGd;AAHc,C;;;;;;;;ACXf;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA8CA,SAAS,MAAT,CAAgB,IAAhB,EAAsB,EAAtB,EAA0B;AACzB,QAAO,QAAQ,EAAf;AACA,MAAK,MAAM,EAAX;;AAEA,KAAI,OAAO,EAAX;;AAEA,MAAK,QAAL,GAAgB,YAAW;AAC1B,SAAO,MAAP;AACA,EAFD;;AAIA;;;;AAIA,IAAG,aAAH,GAAmB,YAAW,CAAE,CAAhC;;AAEA;;;AAGA,IAAG,UAAH,GAAgB,YAAW,CAAE,CAA7B;;AAEA;;;;AAIA,IAAG,cAAH,GAAoB,YAAW,CAAE,CAAjC;;AAEA;;;AAGA,IAAG,sBAAH,GAA4B,sBAA5B;;AAEA;;;AAGA,IAAG,GAAH,GAAS,UAAS,QAAT,EAAmB,MAAnB,EAA2B;AACnC,MAAI,CAAC,MAAL,EAAa;AACZ,YAAS,kBAAW;AACnB,WAAO,GAAG,QAAH,CAAP;AACA,IAFD;AAGA;AACD,OAAK,QAAQ,YAAY,QAAZ,CAAb,IAAsC,MAAtC;AACA,EAPD;;AASA,IAAG,GAAH,GAAS,UAAS,QAAT,EAAmB,MAAnB,EAA2B;AACnC,MAAI,CAAC,MAAL,EAAa;AACZ,YAAS,gBAAS,KAAT,EAAgB;AACxB,OAAG,QAAH,IAAe,KAAf;AACA,WAAO,KAAP;AACA,IAHD;AAIA;AACD,OAAK,QAAQ,YAAY,QAAZ,CAAb,IAAsC,MAAtC;AACA,EARD;;AAUA;AACA;AACA,MAAK,QAAL,GAAgB,UAAhB,CAA2B,OAA3B,CAAmC,UAAS,SAAT,EAAoB;AACtD,YAAU,IAAV,EAAgB,EAAhB;AACA,EAFD;;AAIA,QAAO,IAAP;AACA;;AAED;;;AAGA,OAAO,UAAP,GAAoB,EAApB;;AAEA;;;AAGA,OAAO,aAAP,GAAuB,YAAW;AACjC,KAAI,gBAAgB,KAAK,UAAL,CAAgB,KAAhB,EAApB;AACA,MAAK,UAAL,CAAgB,OAAhB,CAAwB,UAAS,KAAT,EAAgB;AACvC,QAAM,aAAN,GAAsB,OAAtB,CAA8B,UAAS,QAAT,EAAmB;AAChD,iBAAc,IAAd,CAAmB,QAAnB;AACA,GAFD;AAGA,EAJD;AAKA,QAAO,aAAP;AACA,CARD;;AAUA;;;AAGA,OAAO,qBAAP,GAA+B,YAAW;AACzC,KAAI,wBAAwB,KAAK,UAAL,CAAgB,MAAhB,CAAuB,UAAS,KAAT,EAAgB;AAClE,SAAO,CAAC,MAAM,UAAd;AACA,EAF2B,CAA5B;;AAIA,MAAK,UAAL,CAAgB,OAAhB,CAAwB,UAAS,KAAT,EAAgB;AACvC,QAAM,qBAAN,GAA8B,OAA9B,CAAsC,UAAS,QAAT,EAAmB;AACxD,yBAAsB,IAAtB,CAA2B,QAA3B;AACA,GAFD;AAGA,EAJD;;AAMA,QAAO,qBAAP;AACA,CAZD;;AAcA,OAAO,sBAAP,GAAgC,sBAAhC;;AAEA;;;AAGA,OAAO,UAAP,GAAoB,EAApB;;AAEA,IAAI,iBAAiB,WAArB;;AAEA;;;;;;AAMA,OAAO,QAAP,GAAkB,UAAS,OAAT,EAAkB;AACnC,KAAI,OAAO,IAAX;;AAEA,UAAS,KAAT,CAAe,IAAf,EAAqB,EAArB,EAAyB,QAAzB,EAAmC;AAClC,SAAO,QAAQ,EAAf;AACA,OAAK,MAAM,EAAX;;AAEA,MAAI,MAAM,UAAN,IAAoB,CAAC,QAAzB,EAAmC;AAClC,2BAAwB,IAAxB;AACA;;AAED,MAAI,MAAM,WAAN,IAAqB,CAAC,QAA1B,EAAoC;AACnC,4BAAyB,IAAzB;AACA;;AAED,MAAI,WAAW,KAAK,IAAL,EAAW,EAAX,EAAe,IAAf,CAAf;;AAEA,WAAS,QAAT,GAAoB,YAAW;AAC9B,UAAO,KAAP;AACA,GAFD;;AAIA,MAAI,gBAAgB,OAAO,MAAP,CAAc,EAAd,EAAkB,QAAlB,CAApB;AACA,MAAI,UAAU,OAAO,MAAP,CAAc,EAAd,EAAkB,EAAlB,CAAd;;AAEA,QAAM,UAAN,CAAiB,OAAjB,CAAyB,UAAS,SAAT,EAAoB;AAC5C,aAAU,QAAV,EAAoB,EAApB;AACA,GAFD;;AAIA,UAAQ,QAAR,EAAkB,EAAlB;;AAEA,MAAI,eAAe,IAAf,CAAoB,OAApB,CAAJ,EAAkC;AACjC,gBAAa,EAAb,EAAiB,OAAjB,EAA0B,KAA1B,EAAiC,IAAjC;AACA,gBAAa,QAAb,EAAuB,aAAvB,EAAsC,KAAtC,EAA6C,MAA7C;AACA;;AAED,MAAI,CAAC,QAAL,EAAe;AACd,MAAG,aAAH,CAAiB,IAAjB;AACA,MAAG,UAAH,CAAc,IAAd;AACA,MAAG,cAAH,CAAkB,IAAlB;AACA;;AAED,SAAO,QAAP;AACA;;AAED,OAAM,UAAN,GAAmB,IAAnB;AACA,OAAM,UAAN,GAAmB,EAAnB;AACA,MAAK,UAAL,CAAgB,IAAhB,CAAqB,KAArB;;AAEA;AACA,OAAM,YAAN,GAAqB,KAAK,YAA1B;AACA,OAAM,YAAN,CAAmB,KAAnB;;AAEA,QAAO,KAAP;AACA,CArDD;;AAuDA,OAAO,iBAAP,GAA2B,UAAS,OAAT,EAAkB;AAC5C,KAAI,QAAQ,KAAK,QAAL,CAAc,OAAd,CAAZ;AACA,KAAI,WAAW,OAAf;AACA,OAAM,WAAN,GAAoB,IAApB;AACA,OAAM,QAAN,GAAiB,YAAW;AAC3B,SAAO,QAAP;AACA,EAFD;;AAIA,QAAO,KAAP;AACA,CATD;;AAWA,OAAO,gBAAP,GAA0B,UAAS,OAAT,EAAkB;AAC3C,KAAI,QAAQ,KAAK,QAAL,CAAc,OAAd,CAAZ;AACA,OAAM,UAAN,GAAmB,IAAnB;AACA,QAAO,KAAP;AACA,CAJD;;AAMA,OAAO,KAAP,GAAe,UAAS,OAAT,EAAkB;AAChC,KAAI,OAAO,IAAX;;AAEA,KAAI,SAAS,MAAb,EAAqB;AACpB,QAAM,IAAI,KAAJ,CAAU,sCAAV,CAAN;AACA;;AAED,KAAI,oBAAoB,KAAK,YAA7B;AACA,MAAK,YAAL,GAAoB,UAAS,KAAT,EAAgB;AACnC,oBAAkB,KAAlB;AACA,UAAQ,KAAR;AACA,EAHD;;AAKA,MAAK,YAAL,CAAkB,IAAlB;AACA,CAdD;;AAgBA,OAAO,YAAP,GAAsB,UAAS,IAAT,EAAe;AACpC;AACA,MAAK,KAAL,GAAa,OAAO,KAApB;AACA,MAAK,QAAL,GAAgB,OAAO,QAAvB;AACA,MAAK,iBAAL,GAAyB,OAAO,iBAAhC;AACA,MAAK,gBAAL,GAAwB,OAAO,gBAA/B;AACA,MAAK,aAAL,GAAqB,OAAO,aAA5B;AACA,MAAK,qBAAL,GAA6B,OAAO,qBAApC;AACA,MAAK,sBAAL,GAA8B,sBAA9B;AACA,MAAK,MAAL,GAAc,OAAO,MAArB;AACA,MAAK,UAAL,GAAkB,EAAlB;AACA,CAXD;;AAaA;;;;;AAKA,SAAS,YAAT,CAAsB,GAAtB,EAA2B,KAA3B,EAAkC,KAAlC,EAAyC,YAAzC,EAAuD;AACtD,sBAAqB,GAArB,EAA0B,KAA1B,EAAiC,KAAjC,EAAwC,YAAxC,EAAsD,OAAtD,CAA8D,UAAS,IAAT,EAAe;AAC5E,MAAI,CAAC,IAAI,IAAJ,EAAU,cAAf,EAA+B;AAC9B,OAAI,IAAJ,IAAa,UAAS,GAAT,EAAc,EAAd,EAAkB,OAAlB,EAA2B;AACvC,WAAO,YAAW;;AAEjB,SAAI,MAAM,IAAI,KAAd;AACA,SAAI,KAAJ,GAAY,OAAZ;AACA,SAAI,cAAc,GAAG,KAAH,CAAS,GAAT,EAAc,SAAd,CAAlB;AACA,SAAI,KAAJ,GAAY,GAAZ;;AAEA;AACA;AACA,SAAI,IAAI,KAAJ,KAAc,SAAlB,EAA6B;AAC5B,aAAO,IAAI,KAAX;AACA;;AAED,YAAO,WAAP;AACA,KAdD;AAeA,IAhBW,CAgBT,GAhBS,EAgBJ,IAAI,IAAJ,CAhBI,EAgBO,MAAM,IAAN,CAhBP,CAAZ;AAiBA,OAAI,IAAJ,EAAU,cAAV,GAA2B,IAA3B;AACA;AACD,EArBD;AAsBA;;AAED;;;;;;AAMA,SAAS,oBAAT,CAA8B,GAA9B,EAAmC,KAAnC,EAA0C,KAA1C,EAAiD,YAAjD,EAA+D;AAC9D,KAAI,CAAC,MAAM,oBAAX,EAAiC;AAChC,SAAO,cAAP,CAAsB,KAAtB,EAA6B,sBAA7B,EAAqD;AACpD,eAAY,KADwC;AAEpD,aAAU,IAF0C;AAGpD,UAAO;AAH6C,GAArD;AAKA;;AAED,KAAI,MAAM,oBAAN,CAA2B,YAA3B,CAAJ,EAA8C;AAC7C,SAAO,MAAM,oBAAN,CAA2B,YAA3B,CAAP;AACA;;AAED,OAAM,oBAAN,CAA2B,YAA3B,IAA2C,OAAO,IAAP,CAAY,GAAZ,EAAiB,MAAjB,CAAwB,UAAS,IAAT,EAAe;AACjF,SAAO,OAAO,MAAM,IAAN,CAAP,KAAwB,UAAxB,IACN,OAAO,IAAI,IAAJ,CAAP,KAAsB,UADhB,IAEN,eAAe,IAAf,CAAoB,IAAI,IAAJ,CAApB,CAFD;AAGA,EAJ0C,CAA3C;;AAMA,QAAO,MAAM,oBAAN,CAA2B,YAA3B,CAAP;AACA;;AAED;;;;;AAKA,OAAO,MAAP,GAAgB,UAAS,OAAT,EAAkB;AACjC,MAAK,UAAL,CAAgB,IAAhB,CAAqB,OAArB;AACA,CAFD;;AAIA,SAAS,uBAAT,CAAiC,KAAjC,EAAwC;AACvC,OAAM,IAAI,KAAJ,CAAU,sCAAV,CAAN;AACA;;AAED,SAAS,wBAAT,CAAkC,KAAlC,EAAyC;AACxC,OAAM,IAAI,KAAJ,CAAU,2EAAV,CAAN;AACA;;AAED;;;AAGA,IAAI,OAAO,OAAO,MAAd,KAAyB,UAA7B,EAAyC;AACxC,EAAC,YAAW;AACX,SAAO,MAAP,GAAgB,UAAS,MAAT,EAAiB;AAChC,OAAI,WAAW,SAAX,IAAwB,WAAW,IAAvC,EAA6C;AAC5C,UAAM,IAAI,SAAJ,CAAc,4CAAd,CAAN;AACA;;AAED,OAAI,SAAS,OAAO,MAAP,CAAb;AACA,QAAK,IAAI,QAAQ,CAAjB,EAAoB,QAAQ,UAAU,MAAtC,EAA8C,OAA9C,EAAuD;AACtD,QAAI,SAAS,UAAU,KAAV,CAAb;AACA,QAAI,WAAW,SAAX,IAAwB,WAAW,IAAvC,EAA6C;AAC5C,UAAK,IAAI,OAAT,IAAoB,MAApB,EAA4B;AAC3B,UAAI,OAAO,cAAP,CAAsB,OAAtB,CAAJ,EAAoC;AACnC,cAAO,OAAP,IAAkB,OAAO,OAAP,CAAlB;AACA;AACD;AACD;AACD;AACD,UAAO,MAAP;AACA,GAjBD;AAkBA,EAnBD;AAoBA;;AAED;;;;AAIA,SAAS,WAAT,CAAqB,MAArB,EAA6B;AAC5B,QAAO,OAAO,CAAP,EAAU,WAAV,KAA0B,OAAO,KAAP,CAAa,CAAb,CAAjC;AACA;;AAED;;;;AAIA,SAAS,sBAAT,GAAkC;AACjC,OAAM,IAAI,KAAJ,CAAU,yBAAV,CAAN;AACA;;kBAEc,M;;;;;;;;;ACzXf;;;;;;kBAEe,iBAAO,QAAP,CAAgB,UAAS,IAAT,EAAe,EAAf,EAAmB;AACjD,IAAG,UAAH,GAAgB,UAAS,IAAT,EAAe;AAC9B,KAAG,KAAH,CAAS,IAAT;AACA,KAAG,QAAH,GAAc,KAAK,QAAnB;;AAEA,KAAG,eAAH,GAAqB,EAArB;AACA,KAAG,eAAH,GAAqB,EAArB;AACA,EAND;;AAQA,MAAK,QAAL,GAAgB,UAAS,QAAT,EAAmB,QAAnB,EAA6B;AAC5C,MAAI,CAAC,GAAG,eAAH,CAAmB,QAAnB,CAAL,EAAmC;AAClC,MAAG,eAAH,CAAmB,QAAnB,IAA+B,EAA/B;AACA;AACD,MAAI,GAAG,eAAH,CAAmB,QAAnB,EAA6B,OAA7B,CAAqC,QAArC,MAAmD,CAAC,CAAxD,EAA2D;AAC1D,MAAG,eAAH,CAAmB,QAAnB,EAA6B,IAA7B,CAAkC,QAAlC;AACA;AACD,EAPD;;AASA,MAAK,QAAL,GAAgB,UAAS,QAAT,EAAmB,QAAnB,EAA6B;AAC5C,MAAI,CAAC,GAAG,eAAH,CAAmB,QAAnB,CAAL,EAAmC;AAClC,MAAG,eAAH,CAAmB,QAAnB,IAA+B,EAA/B;AACA;AACD,MAAI,GAAG,eAAH,CAAmB,QAAnB,EAA6B,OAA7B,CAAqC,QAArC,MAAmD,CAAC,CAAxD,EAA2D;AAC1D,MAAG,eAAH,CAAmB,QAAnB,EAA6B,IAA7B,CAAkC,QAAlC;AACA;AACD,EAPD;;AASA,MAAK,UAAL,GAAkB,UAAS,QAAT,EAAmB;AACpC,MAAI,CAAC,GAAG,eAAH,CAAmB,QAAnB,CAAL,EAAmC;AAClC;AACA;;AAED,KAAG,eAAH,CAAmB,QAAnB,EAA6B,OAA7B,CAAqC,UAAS,QAAT,EAAmB;AACvD,YAAS,GAAG,QAAZ,EAAsB,QAAtB;AACA,GAFD;AAGA,EARD;;AAUA,MAAK,UAAL,GAAkB,UAAS,QAAT,EAAmB,KAAnB,EAA0B;AAC3C,MAAI,CAAC,GAAG,eAAH,CAAmB,QAAnB,CAAL,EAAmC;AAClC;AACA;;AAED,KAAG,eAAH,CAAmB,QAAnB,EAA6B,OAA7B,CAAqC,UAAS,QAAT,EAAmB;AACvD,YAAS,GAAG,QAAZ,EAAsB,QAAtB,EAAgC,KAAhC;AACA,GAFD;AAGA,EARD;AASA,CA9Cc,C;;;;;ACFf;;;;AACA;;;;AACA;;;;;;AAEA;;;;;;;;AAQA,iBAAO,MAAP,CAAc,UAAS,IAAT,EAAe,EAAf,EAAmB;AAChC,MAAK,gBAAL,GAAwB,UAAS,QAAT,EAAmB,QAAnB,EAA6B;AACpD,MAAI,UAAU,GAAG,4BAAH,EAAd;AACA,UAAQ,QAAR,CAAiB,QAAjB,EAA2B,QAA3B;AACA,EAHD;;AAKA,MAAK,gBAAL,GAAwB,UAAS,QAAT,EAAmB,QAAnB,EAA6B;AACpD,MAAI,UAAU,GAAG,4BAAH,EAAd;AACA,UAAQ,QAAR,CAAiB,QAAjB,EAA2B,QAA3B;AACA,EAHD;;AAKA,IAAG,QAAH,GAAc,UAAS,QAAT,EAAmB,YAAnB,EAAiC;AAC9C,MAAI,QAAQ,YAAZ;AACA,SAAO,cAAP,CAAsB,EAAtB,EAA0B,QAA1B,EAAoC;AACnC,iBAAc,IADqB;AAEnC,eAAY,IAFuB;AAGnC,QAAK,eAAW;AACf,uBAAmB,QAAnB;AACA,WAAO,KAAP;AACA,IANkC;AAOnC,QAAK,aAAS,QAAT,EAAmB;AACvB,YAAQ,QAAR;AACA,uBAAmB,QAAnB,EAA6B,KAA7B;AACA;AAVkC,GAApC;AAYA,EAdD;;AAgBA,IAAG,4BAAH,GAAkC,YAAW;AAC5C,MAAI,GAAG,sBAAP,EAA+B;AAC9B,UAAO,GAAG,sBAAV;AACA;;AAED,KAAG,sBAAH,GAA4B,sCAAuB;AAClD,aAAU;AADwC,GAAvB,CAA5B;;AAIA,SAAO,GAAG,sBAAV;AACA,EAVD;;AAYA,UAAS,kBAAT,CAA4B,QAA5B,EAAsC;AACrC,MAAI,UAAU,GAAG,4BAAH,EAAd;AACA,UAAQ,UAAR,CAAmB,QAAnB;AACA,uCAA2B,QAA3B,GAAsC,UAAtC,CAAiD,IAAjD,EAAuD,QAAvD;AACA;;AAED,UAAS,kBAAT,CAA4B,QAA5B,EAAsC,KAAtC,EAA6C;AAC5C,MAAI,UAAU,GAAG,4BAAH,EAAd;AACA,UAAQ,UAAR,CAAmB,QAAnB,EAA6B,KAA7B;AACA,uCAA2B,QAA3B,GAAsC,UAAtC,CAAiD,IAAjD,EAAuD,QAAvD,EAAiE,KAAjE;AACA;AACD,CAlDD;;;;;;;;;ACXA;;;;;;AAEA;;;;;;;AAOA,IAAI,WAAW,iBAAO,gBAAP,CAAwB,UAAS,IAAT,EAAe,EAAf,EAAmB;;AAEzD,IAAG,UAAH,GAAgB,UAAS,IAAT,EAAe;AAC9B,KAAG,KAAH,CAAS,IAAT;AACA,MAAI,QAAQ,GAAG,eAAH,EAAZ;AACA,QAAM,GAAG,IAAH,EAAN,EAAiB,YAAW;AAC3B,cAAW,GAAG,UAAd;AACA,aAAU,GAAG,SAAb;AACA,aAAU,GAAG,SAAb;AACA,YAAS,GAAG,QAAZ;AACA,SAAM,OAAN,CAAc,UAAS,IAAT,EAAe;AAC5B,OAAG,KAAK,IAAR,EAAc,KAAK,EAAnB;AACA,IAFD;AAGA,GARD;AASA,EAZD;;AAcA,IAAG,KAAH,GAAW,YAAW;AACrB,SAAO,KAAP;AACA,EAFD;;AAIA,IAAG,UAAH,GAAgB,YAAW,CAAE,CAA7B;AACA,IAAG,SAAH,GAAe,YAAW,CAAE,CAA5B;AACA,IAAG,SAAH,GAAe,YAAW,CAAE,CAA5B;AACA,IAAG,QAAH,GAAc,YAAW,CAAE,CAA3B;;AAEA,IAAG,IAAH,GAAU,YAAW;AACpB,SAAO,GAAG,sBAAH,EAAP;AACA,EAFD;;AAIA,IAAG,MAAH,GAAY,MAAZ;AACA,IAAG,KAAH,GAAW,KAAX;;AAEA,IAAG,eAAH,GAAqB,YAAW;AAC/B,MAAI,SAAS,EAAb;AACA,MAAI,YAAY,OAAhB;;AAEA,SAAO,IAAP,CAAY,EAAZ,EAAgB,OAAhB,CAAwB,UAAS,IAAT,EAAe;AACtC,OAAI,OAAO,GAAG,IAAH,CAAP,KAAoB,UAApB,IACH,UAAU,IAAV,CAAe,IAAf,CADD,EACuB;AACtB,WAAO,IAAP,CAAY;AACX,WAAM,GAAG,aAAH,CAAiB,IAAjB,CADK;AAEX,SAAI,GAAG,IAAH;AAFO,KAAZ;AAIA;AACD,GARD;;AAUA,SAAO,MAAP;AACA,EAfD;;AAiBA,IAAG,aAAH,GAAmB,UAAS,IAAT,EAAe;AACjC,SAAO,KAAK,KAAL,CAAW,CAAX,EAAc,CAAC,CAAf,CAAP;AACA,MAAI,SAAS,iBAAb;AACA,SAAO,KAAK,OAAL,CAAa,MAAb,EAAqB,KAArB,CAAP;AACA,SAAO,KAAK,WAAL,EAAP;AACA,SAAO,IAAP;AACA,EAND;;AAQA,UAAS,KAAT,CAAe,IAAf,EAAqB,QAArB,EAA+B;AAC9B,MAAI,GAAG,KAAH,EAAJ,EAAgB;AACf,aAAU,IAAV,EAAgB,YAAW;AAAE;AAC5B;AACA,IAFD;AAGA,GAJD,MAIO;AACN,YAAS,IAAT,EAAe,YAAW;AACzB;AACA,IAFD;AAGA;AACD;AACD,CApEc,CAAf,C,CAVA;;;AAgFA,SAAS,KAAT,CAAe,UAAS,IAAT,EAAe;AAC7B,MAAK,UAAL,GAAkB,YAAW;AAC5B,SAAO,IAAP;AACA,EAFD;;AAIA;AACA;AACA,MAAK,QAAL,GAAiB,UAAS,aAAT,EAAwB;AACxC,SAAO,UAAS,OAAT,EAAkB,OAAlB,EAA2B;AACjC,OAAI,QAAQ,cAAc,KAAd,CAAoB,IAApB,EAA0B,CAAC,OAAD,CAA1B,CAAZ;;AAEA,OAAI,WAAW,QAAQ,UAAvB,EAAmC;AAClC,WAAO,KAAP;AACA;;AAED,OAAI,WAAW,OAAf;AACA,SAAM,WAAN,GAAoB,IAApB;AACA,SAAM,QAAN,GAAiB,YAAW;AAC3B,WAAO,QAAP;AACA,IAFD;;AAIA,UAAO,KAAP;AACA,GAdD;AAeA,EAhBe,CAgBb,KAAK,QAhBQ,CAAhB;;AAkBA;AACA,MAAK,gBAAL,GAAyB,UAAS,qBAAT,EAAgC;AACxD,SAAO,UAAS,OAAT,EAAkB;AACxB,OAAI,QAAQ,KAAK,QAAL,CAAc,OAAd,EAAuB,EAAE,YAAY,IAAd,EAAvB,CAAZ;AACA,SAAM,UAAN,GAAmB,IAAnB;AACA,UAAO,KAAP;AACA,GAJD;AAMA,EAPuB,CAOrB,KAAK,gBAPgB,CAAxB;AAQA,CAlCD;;kBAoCe,Q","file":"klassified.js","sourcesContent":["(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})","import object from \"./object\";\n\n/**\n * Central property events emitter.\n *\n * All properties will trigger events when accessed or changed.\n */\nexport default object.singletonSubclass(function(that, my) {\n\tmy.initialize = function(spec) {\n\t\tmy.super(spec);\n\t\tmy.accessListeners = [];\n\t\tmy.changeListeners = [];\n\t};\n\n\tthat.onAccess = function(listener) {\n\t\tmy.accessListeners.push(listener);\n\t};\n\n\tthat.onChange = function(listener) {\n\t\tmy.changeListeners.push(listener);\n\t};\n\n\tthat.emitAccess = function(instance, propName) {\n\t\tmy.accessListeners.forEach(function(listener) {\n\t\t\tlistener(instance, propName);\n\t\t});\n\t};\n\n\tthat.emitChange = function(instance, propName, value) {\n\t\tmy.changeListeners.forEach(function(listener) {\n\t\t\tlistener(instance, propName, value);\n\t\t});\n\t};\n});\n","import object from \"./object\";\nimport testCase from \"./testCase\";\nimport propertyEventEmitter from \"./globalPropertyEventEmitter\";\nimport \"./property\";\n\nexport {\n\tobject,\n\ttestCase,\n\tpropertyEventEmitter\n};\n\nexport default {\n\tobject,\n\ttestCase,\n\tpropertyEventEmitter\n};\n","/**\n * `object` is the base class of the object model.\n * It provides facilities to create subclasses and common methods.\n *\n * @example Basic usage\n *\n * Creating subclasses & using inheritance:\n *\n *    let animal = object.subclass(function(that, my) {\n *\n *        my.initialize = function(spec) {\n *            my.super();\n *            my.name = spec.name;\n *        };\n *\n *        that.getName = function() {\n *            return my.name;\n *        };\n *\n *        that.say = function(something) {\n *            my.subclassResponsibility();\n *        };\n *    });\n *\n *\n *    let dog = animal.subclass(function(that, my) {\n *\n *        that.getName = function() {\n *            return \"dog \" + that.super();\n *        };\n *\n *        that.say = function(something) {\n *            return \"Woof Woof, \" + something;\n *        };\n *    });\n *\n * Creating instances:\n *\n *    let milou = dog({name: milou});\n *    milou.say(\"hello Tintin\"); ;; => \"Woof Woof, hello Tintin\"\n *    milou.getName(); // => \"dog milou\"\n *\n * @param{{}} spec\n * @param{{}} my\n * @return {object}\n */\nfunction object(spec, my) {\n\tspec = spec || {};\n\tmy = my || {};\n\n\tlet that = {};\n\n\tthat.getClass = function() {\n\t\treturn object;\n\t};\n\n\t/**\n\t * preInitialize is called by the framework at the beginning\n\t * of object instantiation.\n\t */\n\tmy.preInitialize = function() {};\n\n\t/**\n\t * initialize is called by the framework upon object instantiation.\n\t */\n\tmy.initialize = function() {};\n\n\t/**\n\t * postInitialize is called by the framework at the end of\n\t * object instantiation.\n\t */\n\tmy.postInitialize = function() {};\n\n\t/**\n\t * Throws an error because the method should have been overridden.\n\t */\n\tmy.subclassResponsibility = subclassResponsibility;\n\n\t/**\n\t * Getter/Setter generation\n\t */\n\tmy.get = function(propName, getter) {\n\t\tif (!getter) {\n\t\t\tgetter = function() {\n\t\t\t\treturn my[propName];\n\t\t\t};\n\t\t}\n\t\tthat[\"get\" + capitalized(propName)] = getter;\n\t};\n\n\tmy.set = function(propName, setter) {\n\t\tif (!setter) {\n\t\t\tsetter = function(value) {\n\t\t\t\tmy[propName] = value;\n\t\t\t\treturn value;\n\t\t\t};\n\t\t}\n\t\tthat[\"set\" + capitalized(propName)] = setter;\n\t};\n\n\t// install extensions by hand for object, since we do not have the\n\t// extension installation of the subclasses\n\tthat.getClass().extensions.forEach(function(extension) {\n\t\textension(that, my);\n\t});\n\n\treturn that;\n}\n\n/**\n * Return an array of direct subclasses.\n */\nobject.subclasses = [];\n\n/**\n * Return an array of all subclasses.\n */\nobject.allSubclasses = function() {\n\tlet allSubclasses = this.subclasses.slice();\n\tthis.subclasses.forEach(function(klass) {\n\t\tklass.allSubclasses().forEach(function(subclass) {\n\t\t\tallSubclasses.push(subclass);\n\t\t});\n\t});\n\treturn allSubclasses;\n};\n\n/**\n * Return all concrete subclasses.\n */\nobject.allConcreteSubclasses = function() {\n\tlet allConcreteSubclasses = this.subclasses.filter(function(klass) {\n\t\treturn !klass.isAbstract;\n\t});\n\n\tthis.subclasses.forEach(function(klass) {\n\t\tklass.allConcreteSubclasses().forEach(function(subclass) {\n\t\t\tallConcreteSubclasses.push(subclass);\n\t\t});\n\t});\n\n\treturn allConcreteSubclasses;\n};\n\nobject.subclassResponsibility = subclassResponsibility;\n\n/**\n * Return an array of all extensions of the class, see `object.extend`.\n */\nobject.extensions = [];\n\nlet superCallRegex = /\\bsuper\\b/;\n\n/**\n * Return a new subclass, and register it to the array of `subclasses`.\n *\n * @param{function} builder Function used to build new instances of the\n * subclass.\n */\nobject.subclass = function(builder) {\n\tlet that = this;\n\n\tfunction klass(spec, my, notFinal) {\n\t\tspec = spec || {};\n\t\tmy = my || {};\n\n\t\tif (klass.isAbstract && !notFinal) {\n\t\t\tthrowAbstractClassError(that);\n\t\t}\n\n\t\tif (klass.isSingleton && !notFinal) {\n\t\t\tthrowSingletonClassError(that);\n\t\t}\n\n\t\tlet instance = that(spec, my, true);\n\n\t\tinstance.getClass = function() {\n\t\t\treturn klass;\n\t\t};\n\n\t\tlet superInstance = Object.assign({}, instance);\n\t\tlet superMy = Object.assign({}, my);\n\n\t\tklass.extensions.forEach(function(extension) {\n\t\t\textension(instance, my);\n\t\t});\n\n\t\tbuilder(instance, my);\n\n\t\tif (superCallRegex.test(builder)) {\n\t\t\tinstallSuper(my, superMy, klass, \"my\");\n\t\t\tinstallSuper(instance, superInstance, klass, \"that\");\n\t\t}\n\n\t\tif (!notFinal) {\n\t\t\tmy.preInitialize(spec);\n\t\t\tmy.initialize(spec);\n\t\t\tmy.postInitialize(spec);\n\t\t}\n\n\t\treturn instance;\n\t}\n\n\tklass.superclass = that;\n\tklass.subclasses = [];\n\tthat.subclasses.push(klass);\n\n\t// static inheritance\n\tklass.classBuilder = that.classBuilder;\n\tklass.classBuilder(klass);\n\n\treturn klass;\n};\n\nobject.singletonSubclass = function(builder) {\n\tlet klass = this.subclass(builder);\n\tlet instance = klass();\n\tklass.isSingleton = true;\n\tklass.instance = function() {\n\t\treturn instance;\n\t};\n\n\treturn klass;\n};\n\nobject.abstractSubclass = function(builder) {\n\tlet klass = this.subclass(builder);\n\tklass.isAbstract = true;\n\treturn klass;\n};\n\nobject.class = function(builder) {\n\tlet that = this;\n\n\tif (that === object) {\n\t\tthrow new Error(\"object class should not be extended.\");\n\t}\n\n\tlet superClassBuilder = that.classBuilder;\n\tthat.classBuilder = function(klass) {\n\t\tsuperClassBuilder(klass);\n\t\tbuilder(klass);\n\t};\n\n\tthat.classBuilder(that);\n};\n\nobject.classBuilder = function(that) {\n\t// TODO: use Object.assign?\n\tthat.class = object.class;\n\tthat.subclass = object.subclass;\n\tthat.singletonSubclass = object.singletonSubclass;\n\tthat.abstractSubclass = object.abstractSubclass;\n\tthat.allSubclasses = object.allSubclasses;\n\tthat.allConcreteSubclasses = object.allConcreteSubclasses;\n\tthat.subclassResponsibility = subclassResponsibility;\n\tthat.extend = object.extend;\n\tthat.extensions = [];\n};\n\n/**\n * Mutate public functions of `obj` that make use of `super()` by binding\n * `super` from within each public function of `obj` to the function in\n * `proto`.\n */\nfunction installSuper(obj, proto, klass, receiverName) {\n\tmethodsWithSuperCall(obj, proto, klass, receiverName).forEach(function(name) {\n\t\tif (!obj[name].superInstalled) {\n\t\t\tobj[name] = (function(obj, fn, superFn) {\n\t\t\t\treturn function() {\n\n\t\t\t\t\tlet tmp = obj.super;\n\t\t\t\t\tobj.super = superFn;\n\t\t\t\t\tlet returnValue = fn.apply(obj, arguments);\n\t\t\t\t\tobj.super = tmp;\n\n\t\t\t\t\t// We reached the top of the stack regarding super\n\t\t\t\t\t// calls, so cleanup the namespace.\n\t\t\t\t\tif (obj.super === undefined) {\n\t\t\t\t\t\tdelete obj.super;\n\t\t\t\t\t}\n\n\t\t\t\t\treturn returnValue;\n\t\t\t\t};\n\t\t\t})(obj, obj[name], proto[name]);\n\t\t\tobj[name].superInstalled = true;\n\t\t}\n\t});\n}\n\n/**\n * Return the list of methods in `obj` that perform a supercall to `proto`.\n * The list is cached in `klass`.\n *\n * `receiverName` is either \"that\" or \"my\".\n */\nfunction methodsWithSuperCall(obj, proto, klass, receiverName) {\n\tif (!klass.methodsWithSuperCall) {\n\t\tObject.defineProperty(klass, \"methodsWithSuperCall\", {\n\t\t\tenumerable: false,\n\t\t\twritable: true,\n\t\t\tvalue: {}\n\t\t});\n\t}\n\n\tif (klass.methodsWithSuperCall[receiverName]) {\n\t\treturn klass.methodsWithSuperCall[receiverName];\n\t}\n\n\tklass.methodsWithSuperCall[receiverName] = Object.keys(obj).filter(function(name) {\n\t\treturn typeof(proto[name]) === \"function\" &&\n\t\t\ttypeof(obj[name]) === \"function\" &&\n\t\t\tsuperCallRegex.test(obj[name]);\n\t});\n\n\treturn klass.methodsWithSuperCall[receiverName];\n}\n\n/**\n * Extend the class with new methods/properties.\n * @param{function} builder takes the same arguments as\n * `object.subclass`: `that`, `spec` and `my`.\n */\nobject.extend = function(builder) {\n\tthis.extensions.push(builder);\n};\n\nfunction throwAbstractClassError(klass) {\n\tthrow new Error(\"Cannot instantiate an abstract class\");\n}\n\nfunction throwSingletonClassError(klass) {\n\tthrow new Error(\"Cannot create new instances of a singleton class, use `instance` instead.\");\n}\n\n/**\n * Polyfill for Object.assign\n */\nif (typeof Object.assign !== \"function\") {\n\t(function() {\n\t\tObject.assign = function(target) {\n\t\t\tif (target === undefined || target === null) {\n\t\t\t\tthrow new TypeError(\"Cannot convert undefined or null to object\");\n\t\t\t}\n\n\t\t\tlet output = Object(target);\n\t\t\tfor (let index = 1; index < arguments.length; index++) {\n\t\t\t\tlet source = arguments[index];\n\t\t\t\tif (source !== undefined && source !== null) {\n\t\t\t\t\tfor (let nextKey in source) {\n\t\t\t\t\t\tif (source.hasOwnProperty(nextKey)) {\n\t\t\t\t\t\t\toutput[nextKey] = source[nextKey];\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn output;\n\t\t};\n\t})();\n}\n\n/**\n * Helpers\n */\n\nfunction capitalized(string) {\n\treturn string[0].toUpperCase() + string.slice(1);\n}\n\n/**\n * Throw an error when a method should have been overridden in a concrete\n * subclass.\n */\nfunction subclassResponsibility() {\n\tthrow new Error(\"Subclass responsibility\");\n}\n\nexport default object;\n","import object from \"./object\";\n\nexport default object.subclass(function(that, my) {\n\tmy.initialize = function(spec) {\n\t\tmy.super(spec);\n\t\tmy.instance = spec.instance;\n\n\t\tmy.accessListeners = {};\n\t\tmy.changeListeners = {};\n\t};\n\n\tthat.onAccess = function(propName, listener) {\n\t\tif (!my.accessListeners[propName]) {\n\t\t\tmy.accessListeners[propName] = [];\n\t\t}\n\t\tif (my.accessListeners[propName].indexOf(listener) === -1) {\n\t\t\tmy.accessListeners[propName].push(listener);\n\t\t}\n\t};\n\n\tthat.onChange = function(propName, listener) {\n\t\tif (!my.changeListeners[propName]) {\n\t\t\tmy.changeListeners[propName] = [];\n\t\t}\n\t\tif (my.changeListeners[propName].indexOf(listener) === -1) {\n\t\t\tmy.changeListeners[propName].push(listener);\n\t\t}\n\t};\n\n\tthat.emitAccess = function(propName) {\n\t\tif (!my.accessListeners[propName]) {\n\t\t\treturn;\n\t\t}\n\n\t\tmy.accessListeners[propName].forEach(function(listener) {\n\t\t\tlistener(my.instance, propName);\n\t\t});\n\t};\n\n\tthat.emitChange = function(propName, value) {\n\t\tif (!my.changeListeners[propName]) {\n\t\t\treturn;\n\t\t}\n\n\t\tmy.changeListeners[propName].forEach(function(listener) {\n\t\t\tlistener(my.instance, propName, value);\n\t\t});\n\t};\n});\n","import object from \"./object\";\nimport propertiesEventEmitter from \"./propertiesEventEmitter\";\nimport globalPropertyEventEmitter from \"./globalPropertyEventEmitter\";\n\n/**\n * A property represent an observable attribute of an object, with optional\n * getters and setters.\n *\n * @param{string} spec.owner - Instance on which the property is installed.\n * @param{string} spec.name - Name of the property, which value of the same\n * name is installed on `my` on the instance.\n */\nobject.extend(function(that, my) {\n\tthat.onPropertyAccess = function(propName, listener) {\n\t\tlet emitter = my.ensurePropertiesEventEmitter();\n\t\temitter.onAccess(propName, listener);\n\t};\n\n\tthat.onPropertyChange = function(propName, listener) {\n\t\tlet emitter = my.ensurePropertiesEventEmitter();\n\t\temitter.onChange(propName, listener);\n\t};\n\n\tmy.property = function(propName, initialValue) {\n\t\tlet value = initialValue;\n\t\tObject.defineProperty(my, propName, {\n\t\t\tconfigurable: true,\n\t\t\tenumerable: true,\n\t\t\tget: function() {\n\t\t\t\temitPropertyAccess(propName);\n\t\t\t\treturn value;\n\t\t\t},\n\t\t\tset: function(newValue) {\n\t\t\t\tvalue = newValue;\n\t\t\t\temitPropertyChange(propName, value);\n\t\t\t}\n\t\t});\n\t};\n\n\tmy.ensurePropertiesEventEmitter = function() {\n\t\tif (my.propertiesEventEmitter) {\n\t\t\treturn my.propertiesEventEmitter;\n\t\t}\n\n\t\tmy.propertiesEventEmitter = propertiesEventEmitter({\n\t\t\tinstance: that\n\t\t});\n\n\t\treturn my.propertiesEventEmitter;\n\t};\n\n\tfunction emitPropertyAccess(propName) {\n\t\tlet emitter = my.ensurePropertiesEventEmitter();\n\t\temitter.emitAccess(propName);\n\t\tglobalPropertyEventEmitter.instance().emitAccess(that, propName);\n\t}\n\n\tfunction emitPropertyChange(propName, value) {\n\t\tlet emitter = my.ensurePropertiesEventEmitter();\n\t\temitter.emitChange(propName, value);\n\t\tglobalPropertyEventEmitter.instance().emitChange(that, propName, value);\n\t}\n});\n","/* eslint jasmine/no-global-setup: 0 */\nimport object from \"./object\";\n\n/**\n * `testCase` implements an abstract test class, using Jasmine behind the\n * scenes.\n *\n * All subclasses of testCase are singletons (so that one instance is\n * created when the class is loaded).\n */\nlet testCase = object.abstractSubclass(function(that, my) {\n\n\tmy.initialize = function(spec) {\n\t\tmy.super(spec);\n\t\tlet tests = my.registeredTests();\n\t\tsuite(my.name(), function() {\n\t\t\tbeforeEach(my.beforeEach);\n\t\t\tafterEach(my.afterEach);\n\t\t\tbeforeAll(my.beforeAll);\n\t\t\tafterAll(my.afterAll);\n\t\t\ttests.forEach(function(test) {\n\t\t\t\tit(test.name, test.fn);\n\t\t\t});\n\t\t});\n\t};\n\n\tmy.force = function() {\n\t\treturn false;\n\t};\n\n\tmy.beforeEach = function() {};\n\tmy.beforeAll = function() {};\n\tmy.afterEach = function() {};\n\tmy.afterAll = function() {};\n\n\tmy.name = function() {\n\t\treturn my.subclassResponsibility();\n\t};\n\n\tmy.expect = expect;\n\tmy.spyOn = spyOn;\n\n\tmy.registeredTests = function() {\n\t\tlet result = [];\n\t\tlet testRegex = /Test$/;\n\n\t\tObject.keys(my).forEach(function(name) {\n\t\t\tif (typeof my[name] === \"function\" &&\n\t\t\t\ttestRegex.test(name)) {\n\t\t\t\tresult.push({\n\t\t\t\t\tname: my.buildTestName(name),\n\t\t\t\t\tfn: my[name]\n\t\t\t\t});\n\t\t\t}\n\t\t});\n\n\t\treturn result;\n\t};\n\n\tmy.buildTestName = function(name) {\n\t\tname = name.slice(0, -4);\n\t\tlet regexp = /([A-Z][^A-Z]*)/g;\n\t\tname = name.replace(regexp, \" $1\");\n\t\tname = name.toLowerCase();\n\t\treturn name;\n\t};\n\n\tfunction suite(name, callback) {\n\t\tif (my.force()) {\n\t\t\tfdescribe(name, function() { // eslint-disable-line jasmine/no-focused-tests\n\t\t\t\tcallback();\n\t\t\t});\n\t\t} else {\n\t\t\tdescribe(name, function() {\n\t\t\t\tcallback();\n\t\t\t});\n\t\t}\n\t}\n});\n\ntestCase.class(function(that) {\n\tthat.isTestCase = function() {\n\t\treturn true;\n\t};\n\n\t// All test classes are singletons.\n\t// TODO: Refactor with a super call when we\"ll have super on class-side.\n\tthat.subclass = (function(superSubclass) {\n\t\treturn function(builder, options) {\n\t\t\tlet klass = superSubclass.apply(that, [builder]);\n\n\t\t\tif (options && options.isAbstract) {\n\t\t\t\treturn klass;\n\t\t\t}\n\n\t\t\tlet instance = klass();\n\t\t\tklass.isSingleton = true;\n\t\t\tklass.instance = function() {\n\t\t\t\treturn instance;\n\t\t\t};\n\n\t\t\treturn klass;\n\t\t};\n\t})(that.subclass);\n\n\t// We need this to ensure we don't have abstract & singleton classes\n\tthat.abstractSubclass = (function(superAbstractSubclass) {\n\t\treturn function(builder) {\n\t\t\tlet klass = this.subclass(builder, { isAbstract: true });\n\t\t\tklass.isAbstract = true;\n\t\t\treturn klass;\n\t\t};\n\n\t})(that.abstractSubclass);\n});\n\nexport default testCase;\n"],"preExistingComment":"//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJzcmMvZ2xvYmFsUHJvcGVydHlFdmVudEVtaXR0ZXIuanMiLCJzcmMva2xhc3NpZmllZC5qcyIsInNyYy9vYmplY3QuanMiLCJzcmMvcHJvcGVydGllc0V2ZW50RW1pdHRlci5qcyIsInNyYy9wcm9wZXJ0eS5qcyIsInNyYy90ZXN0Q2FzZS5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTs7Ozs7OztBQ0FBOzs7Ozs7QUFFQTs7Ozs7a0JBS2UsaUJBQU8saUJBQVAsQ0FBeUIsVUFBUyxJQUFULEVBQWUsRUFBZixFQUFtQjtBQUMxRCxJQUFHLFVBQUgsR0FBZ0IsVUFBUyxJQUFULEVBQWU7QUFDOUIsS0FBRyxLQUFILENBQVMsSUFBVDtBQUNBLEtBQUcsZUFBSCxHQUFxQixFQUFyQjtBQUNBLEtBQUcsZUFBSCxHQUFxQixFQUFyQjtBQUNBLEVBSkQ7O0FBTUEsTUFBSyxRQUFMLEdBQWdCLFVBQVMsUUFBVCxFQUFtQjtBQUNsQyxLQUFHLGVBQUgsQ0FBbUIsSUFBbkIsQ0FBd0IsUUFBeEI7QUFDQSxFQUZEOztBQUlBLE1BQUssUUFBTCxHQUFnQixVQUFTLFFBQVQsRUFBbUI7QUFDbEMsS0FBRyxlQUFILENBQW1CLElBQW5CLENBQXdCLFFBQXhCO0FBQ0EsRUFGRDs7QUFJQSxNQUFLLFVBQUwsR0FBa0IsVUFBUyxRQUFULEVBQW1CLFFBQW5CLEVBQTZCO0FBQzlDLEtBQUcsZUFBSCxDQUFtQixPQUFuQixDQUEyQixVQUFTLFFBQVQsRUFBbUI7QUFDN0MsWUFBUyxRQUFULEVBQW1CLFFBQW5CO0FBQ0EsR0FGRDtBQUdBLEVBSkQ7O0FBTUEsTUFBSyxVQUFMLEdBQWtCLFVBQVMsUUFBVCxFQUFtQixRQUFuQixFQUE2QixLQUE3QixFQUFvQztBQUNyRCxLQUFHLGVBQUgsQ0FBbUIsT0FBbkIsQ0FBMkIsVUFBUyxRQUFULEVBQW1CO0FBQzdDLFlBQVMsUUFBVCxFQUFtQixRQUFuQixFQUE2QixLQUE3QjtBQUNBLEdBRkQ7QUFHQSxFQUpEO0FBS0EsQ0ExQmMsQzs7Ozs7Ozs7OztBQ1BmOzs7O0FBQ0E7Ozs7QUFDQTs7OztBQUNBOzs7O1FBR0MsTTtRQUNBLFE7UUFDQSxvQjtrQkFHYztBQUNkLHlCQURjO0FBRWQsNkJBRmM7QUFHZDtBQUhjLEM7Ozs7Ozs7O0FDWGY7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUE4Q0EsU0FBUyxNQUFULENBQWdCLElBQWhCLEVBQXNCLEVBQXRCLEVBQTBCO0FBQ3pCLFFBQU8sUUFBUSxFQUFmO0FBQ0EsTUFBSyxNQUFNLEVBQVg7O0FBRUEsS0FBSSxPQUFPLEVBQVg7O0FBRUEsTUFBSyxRQUFMLEdBQWdCLFlBQVc7QUFDMUIsU0FBTyxNQUFQO0FBQ0EsRUFGRDs7QUFJQTs7OztBQUlBLElBQUcsYUFBSCxHQUFtQixZQUFXLENBQUUsQ0FBaEM7O0FBRUE7OztBQUdBLElBQUcsVUFBSCxHQUFnQixZQUFXLENBQUUsQ0FBN0I7O0FBRUE7Ozs7QUFJQSxJQUFHLGNBQUgsR0FBb0IsWUFBVyxDQUFFLENBQWpDOztBQUVBOzs7QUFHQSxJQUFHLHNCQUFILEdBQTRCLHNCQUE1Qjs7QUFFQTs7O0FBR0EsSUFBRyxHQUFILEdBQVMsVUFBUyxRQUFULEVBQW1CLE1BQW5CLEVBQTJCO0FBQ25DLE1BQUksQ0FBQyxNQUFMLEVBQWE7QUFDWixZQUFTLGtCQUFXO0FBQ25CLFdBQU8sR0FBRyxRQUFILENBQVA7QUFDQSxJQUZEO0FBR0E7QUFDRCxPQUFLLFFBQVEsWUFBWSxRQUFaLENBQWIsSUFBc0MsTUFBdEM7QUFDQSxFQVBEOztBQVNBLElBQUcsR0FBSCxHQUFTLFVBQVMsUUFBVCxFQUFtQixNQUFuQixFQUEyQjtBQUNuQyxNQUFJLENBQUMsTUFBTCxFQUFhO0FBQ1osWUFBUyxnQkFBUyxLQUFULEVBQWdCO0FBQ3hCLE9BQUcsUUFBSCxJQUFlLEtBQWY7QUFDQSxXQUFPLEtBQVA7QUFDQSxJQUhEO0FBSUE7QUFDRCxPQUFLLFFBQVEsWUFBWSxRQUFaLENBQWIsSUFBc0MsTUFBdEM7QUFDQSxFQVJEOztBQVVBO0FBQ0E7QUFDQSxNQUFLLFFBQUwsR0FBZ0IsVUFBaEIsQ0FBMkIsT0FBM0IsQ0FBbUMsVUFBUyxTQUFULEVBQW9CO0FBQ3RELFlBQVUsSUFBVixFQUFnQixFQUFoQjtBQUNBLEVBRkQ7O0FBSUEsUUFBTyxJQUFQO0FBQ0E7O0FBRUQ7OztBQUdBLE9BQU8sVUFBUCxHQUFvQixFQUFwQjs7QUFFQTs7O0FBR0EsT0FBTyxhQUFQLEdBQXVCLFlBQVc7QUFDakMsS0FBSSxnQkFBZ0IsS0FBSyxVQUFMLENBQWdCLEtBQWhCLEVBQXBCO0FBQ0EsTUFBSyxVQUFMLENBQWdCLE9BQWhCLENBQXdCLFVBQVMsS0FBVCxFQUFnQjtBQUN2QyxRQUFNLGFBQU4sR0FBc0IsT0FBdEIsQ0FBOEIsVUFBUyxRQUFULEVBQW1CO0FBQ2hELGlCQUFjLElBQWQsQ0FBbUIsUUFBbkI7QUFDQSxHQUZEO0FBR0EsRUFKRDtBQUtBLFFBQU8sYUFBUDtBQUNBLENBUkQ7O0FBVUE7OztBQUdBLE9BQU8scUJBQVAsR0FBK0IsWUFBVztBQUN6QyxLQUFJLHdCQUF3QixLQUFLLFVBQUwsQ0FBZ0IsTUFBaEIsQ0FBdUIsVUFBUyxLQUFULEVBQWdCO0FBQ2xFLFNBQU8sQ0FBQyxNQUFNLFVBQWQ7QUFDQSxFQUYyQixDQUE1Qjs7QUFJQSxNQUFLLFVBQUwsQ0FBZ0IsT0FBaEIsQ0FBd0IsVUFBUyxLQUFULEVBQWdCO0FBQ3ZDLFFBQU0scUJBQU4sR0FBOEIsT0FBOUIsQ0FBc0MsVUFBUyxRQUFULEVBQW1CO0FBQ3hELHlCQUFzQixJQUF0QixDQUEyQixRQUEzQjtBQUNBLEdBRkQ7QUFHQSxFQUpEOztBQU1BLFFBQU8scUJBQVA7QUFDQSxDQVpEOztBQWNBLE9BQU8sc0JBQVAsR0FBZ0Msc0JBQWhDOztBQUVBOzs7QUFHQSxPQUFPLFVBQVAsR0FBb0IsRUFBcEI7O0FBRUEsSUFBSSxpQkFBaUIsV0FBckI7O0FBRUE7Ozs7OztBQU1BLE9BQU8sUUFBUCxHQUFrQixVQUFTLE9BQVQsRUFBa0I7QUFDbkMsS0FBSSxPQUFPLElBQVg7O0FBRUEsVUFBUyxLQUFULENBQWUsSUFBZixFQUFxQixFQUFyQixFQUF5QixRQUF6QixFQUFtQztBQUNsQyxTQUFPLFFBQVEsRUFBZjtBQUNBLE9BQUssTUFBTSxFQUFYOztBQUVBLE1BQUksTUFBTSxVQUFOLElBQW9CLENBQUMsUUFBekIsRUFBbUM7QUFDbEMsMkJBQXdCLElBQXhCO0FBQ0E7O0FBRUQsTUFBSSxNQUFNLFdBQU4sSUFBcUIsQ0FBQyxRQUExQixFQUFvQztBQUNuQyw0QkFBeUIsSUFBekI7QUFDQTs7QUFFRCxNQUFJLFdBQVcsS0FBSyxJQUFMLEVBQVcsRUFBWCxFQUFlLElBQWYsQ0FBZjs7QUFFQSxXQUFTLFFBQVQsR0FBb0IsWUFBVztBQUM5QixVQUFPLEtBQVA7QUFDQSxHQUZEOztBQUlBLE1BQUksZ0JBQWdCLE9BQU8sTUFBUCxDQUFjLEVBQWQsRUFBa0IsUUFBbEIsQ0FBcEI7QUFDQSxNQUFJLFVBQVUsT0FBTyxNQUFQLENBQWMsRUFBZCxFQUFrQixFQUFsQixDQUFkOztBQUVBLFFBQU0sVUFBTixDQUFpQixPQUFqQixDQUF5QixVQUFTLFNBQVQsRUFBb0I7QUFDNUMsYUFBVSxRQUFWLEVBQW9CLEVBQXBCO0FBQ0EsR0FGRDs7QUFJQSxVQUFRLFFBQVIsRUFBa0IsRUFBbEI7O0FBRUEsTUFBSSxlQUFlLElBQWYsQ0FBb0IsT0FBcEIsQ0FBSixFQUFrQztBQUNqQyxnQkFBYSxFQUFiLEVBQWlCLE9BQWpCLEVBQTBCLEtBQTFCLEVBQWlDLElBQWpDO0FBQ0EsZ0JBQWEsUUFBYixFQUF1QixhQUF2QixFQUFzQyxLQUF0QyxFQUE2QyxNQUE3QztBQUNBOztBQUVELE1BQUksQ0FBQyxRQUFMLEVBQWU7QUFDZCxNQUFHLGFBQUgsQ0FBaUIsSUFBakI7QUFDQSxNQUFHLFVBQUgsQ0FBYyxJQUFkO0FBQ0EsTUFBRyxjQUFILENBQWtCLElBQWxCO0FBQ0E7O0FBRUQsU0FBTyxRQUFQO0FBQ0E7O0FBRUQsT0FBTSxVQUFOLEdBQW1CLElBQW5CO0FBQ0EsT0FBTSxVQUFOLEdBQW1CLEVBQW5CO0FBQ0EsTUFBSyxVQUFMLENBQWdCLElBQWhCLENBQXFCLEtBQXJCOztBQUVBO0FBQ0EsT0FBTSxZQUFOLEdBQXFCLEtBQUssWUFBMUI7QUFDQSxPQUFNLFlBQU4sQ0FBbUIsS0FBbkI7O0FBRUEsUUFBTyxLQUFQO0FBQ0EsQ0FyREQ7O0FBdURBLE9BQU8saUJBQVAsR0FBMkIsVUFBUyxPQUFULEVBQWtCO0FBQzVDLEtBQUksUUFBUSxLQUFLLFFBQUwsQ0FBYyxPQUFkLENBQVo7QUFDQSxLQUFJLFdBQVcsT0FBZjtBQUNBLE9BQU0sV0FBTixHQUFvQixJQUFwQjtBQUNBLE9BQU0sUUFBTixHQUFpQixZQUFXO0FBQzNCLFNBQU8sUUFBUDtBQUNBLEVBRkQ7O0FBSUEsUUFBTyxLQUFQO0FBQ0EsQ0FURDs7QUFXQSxPQUFPLGdCQUFQLEdBQTBCLFVBQVMsT0FBVCxFQUFrQjtBQUMzQyxLQUFJLFFBQVEsS0FBSyxRQUFMLENBQWMsT0FBZCxDQUFaO0FBQ0EsT0FBTSxVQUFOLEdBQW1CLElBQW5CO0FBQ0EsUUFBTyxLQUFQO0FBQ0EsQ0FKRDs7QUFNQSxPQUFPLEtBQVAsR0FBZSxVQUFTLE9BQVQsRUFBa0I7QUFDaEMsS0FBSSxPQUFPLElBQVg7O0FBRUEsS0FBSSxTQUFTLE1BQWIsRUFBcUI7QUFDcEIsUUFBTSxJQUFJLEtBQUosQ0FBVSxzQ0FBVixDQUFOO0FBQ0E7O0FBRUQsS0FBSSxvQkFBb0IsS0FBSyxZQUE3QjtBQUNBLE1BQUssWUFBTCxHQUFvQixVQUFTLEtBQVQsRUFBZ0I7QUFDbkMsb0JBQWtCLEtBQWxCO0FBQ0EsVUFBUSxLQUFSO0FBQ0EsRUFIRDs7QUFLQSxNQUFLLFlBQUwsQ0FBa0IsSUFBbEI7QUFDQSxDQWREOztBQWdCQSxPQUFPLFlBQVAsR0FBc0IsVUFBUyxJQUFULEVBQWU7QUFDcEM7QUFDQSxNQUFLLEtBQUwsR0FBYSxPQUFPLEtBQXBCO0FBQ0EsTUFBSyxRQUFMLEdBQWdCLE9BQU8sUUFBdkI7QUFDQSxNQUFLLGlCQUFMLEdBQXlCLE9BQU8saUJBQWhDO0FBQ0EsTUFBSyxnQkFBTCxHQUF3QixPQUFPLGdCQUEvQjtBQUNBLE1BQUssYUFBTCxHQUFxQixPQUFPLGFBQTVCO0FBQ0EsTUFBSyxxQkFBTCxHQUE2QixPQUFPLHFCQUFwQztBQUNBLE1BQUssc0JBQUwsR0FBOEIsc0JBQTlCO0FBQ0EsTUFBSyxNQUFMLEdBQWMsT0FBTyxNQUFyQjtBQUNBLE1BQUssVUFBTCxHQUFrQixFQUFsQjtBQUNBLENBWEQ7O0FBYUE7Ozs7O0FBS0EsU0FBUyxZQUFULENBQXNCLEdBQXRCLEVBQTJCLEtBQTNCLEVBQWtDLEtBQWxDLEVBQXlDLFlBQXpDLEVBQXVEO0FBQ3RELHNCQUFxQixHQUFyQixFQUEwQixLQUExQixFQUFpQyxLQUFqQyxFQUF3QyxZQUF4QyxFQUFzRCxPQUF0RCxDQUE4RCxVQUFTLElBQVQsRUFBZTtBQUM1RSxNQUFJLENBQUMsSUFBSSxJQUFKLEVBQVUsY0FBZixFQUErQjtBQUM5QixPQUFJLElBQUosSUFBYSxVQUFTLEdBQVQsRUFBYyxFQUFkLEVBQWtCLE9BQWxCLEVBQTJCO0FBQ3ZDLFdBQU8sWUFBVzs7QUFFakIsU0FBSSxNQUFNLElBQUksS0FBZDtBQUNBLFNBQUksS0FBSixHQUFZLE9BQVo7QUFDQSxTQUFJLGNBQWMsR0FBRyxLQUFILENBQVMsR0FBVCxFQUFjLFNBQWQsQ0FBbEI7QUFDQSxTQUFJLEtBQUosR0FBWSxHQUFaOztBQUVBO0FBQ0E7QUFDQSxTQUFJLElBQUksS0FBSixLQUFjLFNBQWxCLEVBQTZCO0FBQzVCLGFBQU8sSUFBSSxLQUFYO0FBQ0E7O0FBRUQsWUFBTyxXQUFQO0FBQ0EsS0FkRDtBQWVBLElBaEJXLENBZ0JULEdBaEJTLEVBZ0JKLElBQUksSUFBSixDQWhCSSxFQWdCTyxNQUFNLElBQU4sQ0FoQlAsQ0FBWjtBQWlCQSxPQUFJLElBQUosRUFBVSxjQUFWLEdBQTJCLElBQTNCO0FBQ0E7QUFDRCxFQXJCRDtBQXNCQTs7QUFFRDs7Ozs7O0FBTUEsU0FBUyxvQkFBVCxDQUE4QixHQUE5QixFQUFtQyxLQUFuQyxFQUEwQyxLQUExQyxFQUFpRCxZQUFqRCxFQUErRDtBQUM5RCxLQUFJLENBQUMsTUFBTSxvQkFBWCxFQUFpQztBQUNoQyxTQUFPLGNBQVAsQ0FBc0IsS0FBdEIsRUFBNkIsc0JBQTdCLEVBQXFEO0FBQ3BELGVBQVksS0FEd0M7QUFFcEQsYUFBVSxJQUYwQztBQUdwRCxVQUFPO0FBSDZDLEdBQXJEO0FBS0E7O0FBRUQsS0FBSSxNQUFNLG9CQUFOLENBQTJCLFlBQTNCLENBQUosRUFBOEM7QUFDN0MsU0FBTyxNQUFNLG9CQUFOLENBQTJCLFlBQTNCLENBQVA7QUFDQTs7QUFFRCxPQUFNLG9CQUFOLENBQTJCLFlBQTNCLElBQTJDLE9BQU8sSUFBUCxDQUFZLEdBQVosRUFBaUIsTUFBakIsQ0FBd0IsVUFBUyxJQUFULEVBQWU7QUFDakYsU0FBTyxPQUFPLE1BQU0sSUFBTixDQUFQLEtBQXdCLFVBQXhCLElBQ04sT0FBTyxJQUFJLElBQUosQ0FBUCxLQUFzQixVQURoQixJQUVOLGVBQWUsSUFBZixDQUFvQixJQUFJLElBQUosQ0FBcEIsQ0FGRDtBQUdBLEVBSjBDLENBQTNDOztBQU1BLFFBQU8sTUFBTSxvQkFBTixDQUEyQixZQUEzQixDQUFQO0FBQ0E7O0FBRUQ7Ozs7O0FBS0EsT0FBTyxNQUFQLEdBQWdCLFVBQVMsT0FBVCxFQUFrQjtBQUNqQyxNQUFLLFVBQUwsQ0FBZ0IsSUFBaEIsQ0FBcUIsT0FBckI7QUFDQSxDQUZEOztBQUlBLFNBQVMsdUJBQVQsQ0FBaUMsS0FBakMsRUFBd0M7QUFDdkMsT0FBTSxJQUFJLEtBQUosQ0FBVSxzQ0FBVixDQUFOO0FBQ0E7O0FBRUQsU0FBUyx3QkFBVCxDQUFrQyxLQUFsQyxFQUF5QztBQUN4QyxPQUFNLElBQUksS0FBSixDQUFVLDJFQUFWLENBQU47QUFDQTs7QUFFRDs7O0FBR0EsSUFBSSxPQUFPLE9BQU8sTUFBZCxLQUF5QixVQUE3QixFQUF5QztBQUN4QyxFQUFDLFlBQVc7QUFDWCxTQUFPLE1BQVAsR0FBZ0IsVUFBUyxNQUFULEVBQWlCO0FBQ2hDLE9BQUksV0FBVyxTQUFYLElBQXdCLFdBQVcsSUFBdkMsRUFBNkM7QUFDNUMsVUFBTSxJQUFJLFNBQUosQ0FBYyw0Q0FBZCxDQUFOO0FBQ0E7O0FBRUQsT0FBSSxTQUFTLE9BQU8sTUFBUCxDQUFiO0FBQ0EsUUFBSyxJQUFJLFFBQVEsQ0FBakIsRUFBb0IsUUFBUSxVQUFVLE1BQXRDLEVBQThDLE9BQTlDLEVBQXVEO0FBQ3RELFFBQUksU0FBUyxVQUFVLEtBQVYsQ0FBYjtBQUNBLFFBQUksV0FBVyxTQUFYLElBQXdCLFdBQVcsSUFBdkMsRUFBNkM7QUFDNUMsVUFBSyxJQUFJLE9BQVQsSUFBb0IsTUFBcEIsRUFBNEI7QUFDM0IsVUFBSSxPQUFPLGNBQVAsQ0FBc0IsT0FBdEIsQ0FBSixFQUFvQztBQUNuQyxjQUFPLE9BQVAsSUFBa0IsT0FBTyxPQUFQLENBQWxCO0FBQ0E7QUFDRDtBQUNEO0FBQ0Q7QUFDRCxVQUFPLE1BQVA7QUFDQSxHQWpCRDtBQWtCQSxFQW5CRDtBQW9CQTs7QUFFRDs7OztBQUlBLFNBQVMsV0FBVCxDQUFxQixNQUFyQixFQUE2QjtBQUM1QixRQUFPLE9BQU8sQ0FBUCxFQUFVLFdBQVYsS0FBMEIsT0FBTyxLQUFQLENBQWEsQ0FBYixDQUFqQztBQUNBOztBQUVEOzs7O0FBSUEsU0FBUyxzQkFBVCxHQUFrQztBQUNqQyxPQUFNLElBQUksS0FBSixDQUFVLHlCQUFWLENBQU47QUFDQTs7a0JBRWMsTTs7Ozs7Ozs7O0FDelhmOzs7Ozs7a0JBRWUsaUJBQU8sUUFBUCxDQUFnQixVQUFTLElBQVQsRUFBZSxFQUFmLEVBQW1CO0FBQ2pELElBQUcsVUFBSCxHQUFnQixVQUFTLElBQVQsRUFBZTtBQUM5QixLQUFHLEtBQUgsQ0FBUyxJQUFUO0FBQ0EsS0FBRyxRQUFILEdBQWMsS0FBSyxRQUFuQjs7QUFFQSxLQUFHLGVBQUgsR0FBcUIsRUFBckI7QUFDQSxLQUFHLGVBQUgsR0FBcUIsRUFBckI7QUFDQSxFQU5EOztBQVFBLE1BQUssUUFBTCxHQUFnQixVQUFTLFFBQVQsRUFBbUIsUUFBbkIsRUFBNkI7QUFDNUMsTUFBSSxDQUFDLEdBQUcsZUFBSCxDQUFtQixRQUFuQixDQUFMLEVBQW1DO0FBQ2xDLE1BQUcsZUFBSCxDQUFtQixRQUFuQixJQUErQixFQUEvQjtBQUNBO0FBQ0QsTUFBSSxHQUFHLGVBQUgsQ0FBbUIsUUFBbkIsRUFBNkIsT0FBN0IsQ0FBcUMsUUFBckMsTUFBbUQsQ0FBQyxDQUF4RCxFQUEyRDtBQUMxRCxNQUFHLGVBQUgsQ0FBbUIsUUFBbkIsRUFBNkIsSUFBN0IsQ0FBa0MsUUFBbEM7QUFDQTtBQUNELEVBUEQ7O0FBU0EsTUFBSyxRQUFMLEdBQWdCLFVBQVMsUUFBVCxFQUFtQixRQUFuQixFQUE2QjtBQUM1QyxNQUFJLENBQUMsR0FBRyxlQUFILENBQW1CLFFBQW5CLENBQUwsRUFBbUM7QUFDbEMsTUFBRyxlQUFILENBQW1CLFFBQW5CLElBQStCLEVBQS9CO0FBQ0E7QUFDRCxNQUFJLEdBQUcsZUFBSCxDQUFtQixRQUFuQixFQUE2QixPQUE3QixDQUFxQyxRQUFyQyxNQUFtRCxDQUFDLENBQXhELEVBQTJEO0FBQzFELE1BQUcsZUFBSCxDQUFtQixRQUFuQixFQUE2QixJQUE3QixDQUFrQyxRQUFsQztBQUNBO0FBQ0QsRUFQRDs7QUFTQSxNQUFLLFVBQUwsR0FBa0IsVUFBUyxRQUFULEVBQW1CO0FBQ3BDLE1BQUksQ0FBQyxHQUFHLGVBQUgsQ0FBbUIsUUFBbkIsQ0FBTCxFQUFtQztBQUNsQztBQUNBOztBQUVELEtBQUcsZUFBSCxDQUFtQixRQUFuQixFQUE2QixPQUE3QixDQUFxQyxVQUFTLFFBQVQsRUFBbUI7QUFDdkQsWUFBUyxHQUFHLFFBQVosRUFBc0IsUUFBdEI7QUFDQSxHQUZEO0FBR0EsRUFSRDs7QUFVQSxNQUFLLFVBQUwsR0FBa0IsVUFBUyxRQUFULEVBQW1CLEtBQW5CLEVBQTBCO0FBQzNDLE1BQUksQ0FBQyxHQUFHLGVBQUgsQ0FBbUIsUUFBbkIsQ0FBTCxFQUFtQztBQUNsQztBQUNBOztBQUVELEtBQUcsZUFBSCxDQUFtQixRQUFuQixFQUE2QixPQUE3QixDQUFxQyxVQUFTLFFBQVQsRUFBbUI7QUFDdkQsWUFBUyxHQUFHLFFBQVosRUFBc0IsUUFBdEIsRUFBZ0MsS0FBaEM7QUFDQSxHQUZEO0FBR0EsRUFSRDtBQVNBLENBOUNjLEM7Ozs7O0FDRmY7Ozs7QUFDQTs7OztBQUNBOzs7Ozs7QUFFQTs7Ozs7Ozs7QUFRQSxpQkFBTyxNQUFQLENBQWMsVUFBUyxJQUFULEVBQWUsRUFBZixFQUFtQjtBQUNoQyxNQUFLLGdCQUFMLEdBQXdCLFVBQVMsUUFBVCxFQUFtQixRQUFuQixFQUE2QjtBQUNwRCxNQUFJLFVBQVUsR0FBRyw0QkFBSCxFQUFkO0FBQ0EsVUFBUSxRQUFSLENBQWlCLFFBQWpCLEVBQTJCLFFBQTNCO0FBQ0EsRUFIRDs7QUFLQSxNQUFLLGdCQUFMLEdBQXdCLFVBQVMsUUFBVCxFQUFtQixRQUFuQixFQUE2QjtBQUNwRCxNQUFJLFVBQVUsR0FBRyw0QkFBSCxFQUFkO0FBQ0EsVUFBUSxRQUFSLENBQWlCLFFBQWpCLEVBQTJCLFFBQTNCO0FBQ0EsRUFIRDs7QUFLQSxJQUFHLFFBQUgsR0FBYyxVQUFTLFFBQVQsRUFBbUIsWUFBbkIsRUFBaUM7QUFDOUMsTUFBSSxRQUFRLFlBQVo7QUFDQSxTQUFPLGNBQVAsQ0FBc0IsRUFBdEIsRUFBMEIsUUFBMUIsRUFBb0M7QUFDbkMsaUJBQWMsSUFEcUI7QUFFbkMsZUFBWSxJQUZ1QjtBQUduQyxRQUFLLGVBQVc7QUFDZix1QkFBbUIsUUFBbkI7QUFDQSxXQUFPLEtBQVA7QUFDQSxJQU5rQztBQU9uQyxRQUFLLGFBQVMsUUFBVCxFQUFtQjtBQUN2QixZQUFRLFFBQVI7QUFDQSx1QkFBbUIsUUFBbkIsRUFBNkIsS0FBN0I7QUFDQTtBQVZrQyxHQUFwQztBQVlBLEVBZEQ7O0FBZ0JBLElBQUcsNEJBQUgsR0FBa0MsWUFBVztBQUM1QyxNQUFJLEdBQUcsc0JBQVAsRUFBK0I7QUFDOUIsVUFBTyxHQUFHLHNCQUFWO0FBQ0E7O0FBRUQsS0FBRyxzQkFBSCxHQUE0QixzQ0FBdUI7QUFDbEQsYUFBVTtBQUR3QyxHQUF2QixDQUE1Qjs7QUFJQSxTQUFPLEdBQUcsc0JBQVY7QUFDQSxFQVZEOztBQVlBLFVBQVMsa0JBQVQsQ0FBNEIsUUFBNUIsRUFBc0M7QUFDckMsTUFBSSxVQUFVLEdBQUcsNEJBQUgsRUFBZDtBQUNBLFVBQVEsVUFBUixDQUFtQixRQUFuQjtBQUNBLHVDQUEyQixRQUEzQixHQUFzQyxVQUF0QyxDQUFpRCxJQUFqRCxFQUF1RCxRQUF2RDtBQUNBOztBQUVELFVBQVMsa0JBQVQsQ0FBNEIsUUFBNUIsRUFBc0MsS0FBdEMsRUFBNkM7QUFDNUMsTUFBSSxVQUFVLEdBQUcsNEJBQUgsRUFBZDtBQUNBLFVBQVEsVUFBUixDQUFtQixRQUFuQixFQUE2QixLQUE3QjtBQUNBLHVDQUEyQixRQUEzQixHQUFzQyxVQUF0QyxDQUFpRCxJQUFqRCxFQUF1RCxRQUF2RCxFQUFpRSxLQUFqRTtBQUNBO0FBQ0QsQ0FsREQ7Ozs7Ozs7OztBQ1hBOzs7Ozs7QUFFQTs7Ozs7OztBQU9BLElBQUksV0FBVyxpQkFBTyxnQkFBUCxDQUF3QixVQUFTLElBQVQsRUFBZSxFQUFmLEVBQW1COztBQUV6RCxJQUFHLFVBQUgsR0FBZ0IsVUFBUyxJQUFULEVBQWU7QUFDOUIsS0FBRyxLQUFILENBQVMsSUFBVDtBQUNBLE1BQUksUUFBUSxHQUFHLGVBQUgsRUFBWjtBQUNBLFFBQU0sR0FBRyxJQUFILEVBQU4sRUFBaUIsWUFBVztBQUMzQixjQUFXLEdBQUcsVUFBZDtBQUNBLGFBQVUsR0FBRyxTQUFiO0FBQ0EsYUFBVSxHQUFHLFNBQWI7QUFDQSxZQUFTLEdBQUcsUUFBWjtBQUNBLFNBQU0sT0FBTixDQUFjLFVBQVMsSUFBVCxFQUFlO0FBQzVCLE9BQUcsS0FBSyxJQUFSLEVBQWMsS0FBSyxFQUFuQjtBQUNBLElBRkQ7QUFHQSxHQVJEO0FBU0EsRUFaRDs7QUFjQSxJQUFHLEtBQUgsR0FBVyxZQUFXO0FBQ3JCLFNBQU8sS0FBUDtBQUNBLEVBRkQ7O0FBSUEsSUFBRyxVQUFILEdBQWdCLFlBQVcsQ0FBRSxDQUE3QjtBQUNBLElBQUcsU0FBSCxHQUFlLFlBQVcsQ0FBRSxDQUE1QjtBQUNBLElBQUcsU0FBSCxHQUFlLFlBQVcsQ0FBRSxDQUE1QjtBQUNBLElBQUcsUUFBSCxHQUFjLFlBQVcsQ0FBRSxDQUEzQjs7QUFFQSxJQUFHLElBQUgsR0FBVSxZQUFXO0FBQ3BCLFNBQU8sR0FBRyxzQkFBSCxFQUFQO0FBQ0EsRUFGRDs7QUFJQSxJQUFHLE1BQUgsR0FBWSxNQUFaO0FBQ0EsSUFBRyxLQUFILEdBQVcsS0FBWDs7QUFFQSxJQUFHLGVBQUgsR0FBcUIsWUFBVztBQUMvQixNQUFJLFNBQVMsRUFBYjtBQUNBLE1BQUksWUFBWSxPQUFoQjs7QUFFQSxTQUFPLElBQVAsQ0FBWSxFQUFaLEVBQWdCLE9BQWhCLENBQXdCLFVBQVMsSUFBVCxFQUFlO0FBQ3RDLE9BQUksT0FBTyxHQUFHLElBQUgsQ0FBUCxLQUFvQixVQUFwQixJQUNILFVBQVUsSUFBVixDQUFlLElBQWYsQ0FERCxFQUN1QjtBQUN0QixXQUFPLElBQVAsQ0FBWTtBQUNYLFdBQU0sR0FBRyxhQUFILENBQWlCLElBQWpCLENBREs7QUFFWCxTQUFJLEdBQUcsSUFBSDtBQUZPLEtBQVo7QUFJQTtBQUNELEdBUkQ7O0FBVUEsU0FBTyxNQUFQO0FBQ0EsRUFmRDs7QUFpQkEsSUFBRyxhQUFILEdBQW1CLFVBQVMsSUFBVCxFQUFlO0FBQ2pDLFNBQU8sS0FBSyxLQUFMLENBQVcsQ0FBWCxFQUFjLENBQUMsQ0FBZixDQUFQO0FBQ0EsTUFBSSxTQUFTLGlCQUFiO0FBQ0EsU0FBTyxLQUFLLE9BQUwsQ0FBYSxNQUFiLEVBQXFCLEtBQXJCLENBQVA7QUFDQSxTQUFPLEtBQUssV0FBTCxFQUFQO0FBQ0EsU0FBTyxJQUFQO0FBQ0EsRUFORDs7QUFRQSxVQUFTLEtBQVQsQ0FBZSxJQUFmLEVBQXFCLFFBQXJCLEVBQStCO0FBQzlCLE1BQUksR0FBRyxLQUFILEVBQUosRUFBZ0I7QUFDZixhQUFVLElBQVYsRUFBZ0IsWUFBVztBQUFFO0FBQzVCO0FBQ0EsSUFGRDtBQUdBLEdBSkQsTUFJTztBQUNOLFlBQVMsSUFBVCxFQUFlLFlBQVc7QUFDekI7QUFDQSxJQUZEO0FBR0E7QUFDRDtBQUNELENBcEVjLENBQWYsQyxDQVZBOzs7QUFnRkEsU0FBUyxLQUFULENBQWUsVUFBUyxJQUFULEVBQWU7QUFDN0IsTUFBSyxVQUFMLEdBQWtCLFlBQVc7QUFDNUIsU0FBTyxJQUFQO0FBQ0EsRUFGRDs7QUFJQTtBQUNBO0FBQ0EsTUFBSyxRQUFMLEdBQWlCLFVBQVMsYUFBVCxFQUF3QjtBQUN4QyxTQUFPLFVBQVMsT0FBVCxFQUFrQixPQUFsQixFQUEyQjtBQUNqQyxPQUFJLFFBQVEsY0FBYyxLQUFkLENBQW9CLElBQXBCLEVBQTBCLENBQUMsT0FBRCxDQUExQixDQUFaOztBQUVBLE9BQUksV0FBVyxRQUFRLFVBQXZCLEVBQW1DO0FBQ2xDLFdBQU8sS0FBUDtBQUNBOztBQUVELE9BQUksV0FBVyxPQUFmO0FBQ0EsU0FBTSxXQUFOLEdBQW9CLElBQXBCO0FBQ0EsU0FBTSxRQUFOLEdBQWlCLFlBQVc7QUFDM0IsV0FBTyxRQUFQO0FBQ0EsSUFGRDs7QUFJQSxVQUFPLEtBQVA7QUFDQSxHQWREO0FBZUEsRUFoQmUsQ0FnQmIsS0FBSyxRQWhCUSxDQUFoQjs7QUFrQkE7QUFDQSxNQUFLLGdCQUFMLEdBQXlCLFVBQVMscUJBQVQsRUFBZ0M7QUFDeEQsU0FBTyxVQUFTLE9BQVQsRUFBa0I7QUFDeEIsT0FBSSxRQUFRLEtBQUssUUFBTCxDQUFjLE9BQWQsRUFBdUIsRUFBRSxZQUFZLElBQWQsRUFBdkIsQ0FBWjtBQUNBLFNBQU0sVUFBTixHQUFtQixJQUFuQjtBQUNBLFVBQU8sS0FBUDtBQUNBLEdBSkQ7QUFNQSxFQVB1QixDQU9yQixLQUFLLGdCQVBnQixDQUF4QjtBQVFBLENBbENEOztrQkFvQ2UsUSIsImZpbGUiOiJnZW5lcmF0ZWQuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlc0NvbnRlbnQiOlsiKGZ1bmN0aW9uIGUodCxuLHIpe2Z1bmN0aW9uIHMobyx1KXtpZighbltvXSl7aWYoIXRbb10pe3ZhciBhPXR5cGVvZiByZXF1aXJlPT1cImZ1bmN0aW9uXCImJnJlcXVpcmU7aWYoIXUmJmEpcmV0dXJuIGEobywhMCk7aWYoaSlyZXR1cm4gaShvLCEwKTt2YXIgZj1uZXcgRXJyb3IoXCJDYW5ub3QgZmluZCBtb2R1bGUgJ1wiK28rXCInXCIpO3Rocm93IGYuY29kZT1cIk1PRFVMRV9OT1RfRk9VTkRcIixmfXZhciBsPW5bb109e2V4cG9ydHM6e319O3Rbb11bMF0uY2FsbChsLmV4cG9ydHMsZnVuY3Rpb24oZSl7dmFyIG49dFtvXVsxXVtlXTtyZXR1cm4gcyhuP246ZSl9LGwsbC5leHBvcnRzLGUsdCxuLHIpfXJldHVybiBuW29dLmV4cG9ydHN9dmFyIGk9dHlwZW9mIHJlcXVpcmU9PVwiZnVuY3Rpb25cIiYmcmVxdWlyZTtmb3IodmFyIG89MDtvPHIubGVuZ3RoO28rKylzKHJbb10pO3JldHVybiBzfSkiLCJpbXBvcnQgb2JqZWN0IGZyb20gXCIuL29iamVjdFwiO1xuXG4vKipcbiAqIENlbnRyYWwgcHJvcGVydHkgZXZlbnRzIGVtaXR0ZXIuXG4gKlxuICogQWxsIHByb3BlcnRpZXMgd2lsbCB0cmlnZ2VyIGV2ZW50cyB3aGVuIGFjY2Vzc2VkIG9yIGNoYW5nZWQuXG4gKi9cbmV4cG9ydCBkZWZhdWx0IG9iamVjdC5zaW5nbGV0b25TdWJjbGFzcyhmdW5jdGlvbih0aGF0LCBteSkge1xuXHRteS5pbml0aWFsaXplID0gZnVuY3Rpb24oc3BlYykge1xuXHRcdG15LnN1cGVyKHNwZWMpO1xuXHRcdG15LmFjY2Vzc0xpc3RlbmVycyA9IFtdO1xuXHRcdG15LmNoYW5nZUxpc3RlbmVycyA9IFtdO1xuXHR9O1xuXG5cdHRoYXQub25BY2Nlc3MgPSBmdW5jdGlvbihsaXN0ZW5lcikge1xuXHRcdG15LmFjY2Vzc0xpc3RlbmVycy5wdXNoKGxpc3RlbmVyKTtcblx0fTtcblxuXHR0aGF0Lm9uQ2hhbmdlID0gZnVuY3Rpb24obGlzdGVuZXIpIHtcblx0XHRteS5jaGFuZ2VMaXN0ZW5lcnMucHVzaChsaXN0ZW5lcik7XG5cdH07XG5cblx0dGhhdC5lbWl0QWNjZXNzID0gZnVuY3Rpb24oaW5zdGFuY2UsIHByb3BOYW1lKSB7XG5cdFx0bXkuYWNjZXNzTGlzdGVuZXJzLmZvckVhY2goZnVuY3Rpb24obGlzdGVuZXIpIHtcblx0XHRcdGxpc3RlbmVyKGluc3RhbmNlLCBwcm9wTmFtZSk7XG5cdFx0fSk7XG5cdH07XG5cblx0dGhhdC5lbWl0Q2hhbmdlID0gZnVuY3Rpb24oaW5zdGFuY2UsIHByb3BOYW1lLCB2YWx1ZSkge1xuXHRcdG15LmNoYW5nZUxpc3RlbmVycy5mb3JFYWNoKGZ1bmN0aW9uKGxpc3RlbmVyKSB7XG5cdFx0XHRsaXN0ZW5lcihpbnN0YW5jZSwgcHJvcE5hbWUsIHZhbHVlKTtcblx0XHR9KTtcblx0fTtcbn0pO1xuIiwiaW1wb3J0IG9iamVjdCBmcm9tIFwiLi9vYmplY3RcIjtcbmltcG9ydCB0ZXN0Q2FzZSBmcm9tIFwiLi90ZXN0Q2FzZVwiO1xuaW1wb3J0IHByb3BlcnR5RXZlbnRFbWl0dGVyIGZyb20gXCIuL2dsb2JhbFByb3BlcnR5RXZlbnRFbWl0dGVyXCI7XG5pbXBvcnQgXCIuL3Byb3BlcnR5XCI7XG5cbmV4cG9ydCB7XG5cdG9iamVjdCxcblx0dGVzdENhc2UsXG5cdHByb3BlcnR5RXZlbnRFbWl0dGVyXG59O1xuXG5leHBvcnQgZGVmYXVsdCB7XG5cdG9iamVjdCxcblx0dGVzdENhc2UsXG5cdHByb3BlcnR5RXZlbnRFbWl0dGVyXG59O1xuIiwiLyoqXG4gKiBgb2JqZWN0YCBpcyB0aGUgYmFzZSBjbGFzcyBvZiB0aGUgb2JqZWN0IG1vZGVsLlxuICogSXQgcHJvdmlkZXMgZmFjaWxpdGllcyB0byBjcmVhdGUgc3ViY2xhc3NlcyBhbmQgY29tbW9uIG1ldGhvZHMuXG4gKlxuICogQGV4YW1wbGUgQmFzaWMgdXNhZ2VcbiAqXG4gKiBDcmVhdGluZyBzdWJjbGFzc2VzICYgdXNpbmcgaW5oZXJpdGFuY2U6XG4gKlxuICogICAgbGV0IGFuaW1hbCA9IG9iamVjdC5zdWJjbGFzcyhmdW5jdGlvbih0aGF0LCBteSkge1xuICpcbiAqICAgICAgICBteS5pbml0aWFsaXplID0gZnVuY3Rpb24oc3BlYykge1xuICogICAgICAgICAgICBteS5zdXBlcigpO1xuICogICAgICAgICAgICBteS5uYW1lID0gc3BlYy5uYW1lO1xuICogICAgICAgIH07XG4gKlxuICogICAgICAgIHRoYXQuZ2V0TmFtZSA9IGZ1bmN0aW9uKCkge1xuICogICAgICAgICAgICByZXR1cm4gbXkubmFtZTtcbiAqICAgICAgICB9O1xuICpcbiAqICAgICAgICB0aGF0LnNheSA9IGZ1bmN0aW9uKHNvbWV0aGluZykge1xuICogICAgICAgICAgICBteS5zdWJjbGFzc1Jlc3BvbnNpYmlsaXR5KCk7XG4gKiAgICAgICAgfTtcbiAqICAgIH0pO1xuICpcbiAqXG4gKiAgICBsZXQgZG9nID0gYW5pbWFsLnN1YmNsYXNzKGZ1bmN0aW9uKHRoYXQsIG15KSB7XG4gKlxuICogICAgICAgIHRoYXQuZ2V0TmFtZSA9IGZ1bmN0aW9uKCkge1xuICogICAgICAgICAgICByZXR1cm4gXCJkb2cgXCIgKyB0aGF0LnN1cGVyKCk7XG4gKiAgICAgICAgfTtcbiAqXG4gKiAgICAgICAgdGhhdC5zYXkgPSBmdW5jdGlvbihzb21ldGhpbmcpIHtcbiAqICAgICAgICAgICAgcmV0dXJuIFwiV29vZiBXb29mLCBcIiArIHNvbWV0aGluZztcbiAqICAgICAgICB9O1xuICogICAgfSk7XG4gKlxuICogQ3JlYXRpbmcgaW5zdGFuY2VzOlxuICpcbiAqICAgIGxldCBtaWxvdSA9IGRvZyh7bmFtZTogbWlsb3V9KTtcbiAqICAgIG1pbG91LnNheShcImhlbGxvIFRpbnRpblwiKTsgOzsgPT4gXCJXb29mIFdvb2YsIGhlbGxvIFRpbnRpblwiXG4gKiAgICBtaWxvdS5nZXROYW1lKCk7IC8vID0+IFwiZG9nIG1pbG91XCJcbiAqXG4gKiBAcGFyYW17e319IHNwZWNcbiAqIEBwYXJhbXt7fX0gbXlcbiAqIEByZXR1cm4ge29iamVjdH1cbiAqL1xuZnVuY3Rpb24gb2JqZWN0KHNwZWMsIG15KSB7XG5cdHNwZWMgPSBzcGVjIHx8IHt9O1xuXHRteSA9IG15IHx8IHt9O1xuXG5cdGxldCB0aGF0ID0ge307XG5cblx0dGhhdC5nZXRDbGFzcyA9IGZ1bmN0aW9uKCkge1xuXHRcdHJldHVybiBvYmplY3Q7XG5cdH07XG5cblx0LyoqXG5cdCAqIHByZUluaXRpYWxpemUgaXMgY2FsbGVkIGJ5IHRoZSBmcmFtZXdvcmsgYXQgdGhlIGJlZ2lubmluZ1xuXHQgKiBvZiBvYmplY3QgaW5zdGFudGlhdGlvbi5cblx0ICovXG5cdG15LnByZUluaXRpYWxpemUgPSBmdW5jdGlvbigpIHt9O1xuXG5cdC8qKlxuXHQgKiBpbml0aWFsaXplIGlzIGNhbGxlZCBieSB0aGUgZnJhbWV3b3JrIHVwb24gb2JqZWN0IGluc3RhbnRpYXRpb24uXG5cdCAqL1xuXHRteS5pbml0aWFsaXplID0gZnVuY3Rpb24oKSB7fTtcblxuXHQvKipcblx0ICogcG9zdEluaXRpYWxpemUgaXMgY2FsbGVkIGJ5IHRoZSBmcmFtZXdvcmsgYXQgdGhlIGVuZCBvZlxuXHQgKiBvYmplY3QgaW5zdGFudGlhdGlvbi5cblx0ICovXG5cdG15LnBvc3RJbml0aWFsaXplID0gZnVuY3Rpb24oKSB7fTtcblxuXHQvKipcblx0ICogVGhyb3dzIGFuIGVycm9yIGJlY2F1c2UgdGhlIG1ldGhvZCBzaG91bGQgaGF2ZSBiZWVuIG92ZXJyaWRkZW4uXG5cdCAqL1xuXHRteS5zdWJjbGFzc1Jlc3BvbnNpYmlsaXR5ID0gc3ViY2xhc3NSZXNwb25zaWJpbGl0eTtcblxuXHQvKipcblx0ICogR2V0dGVyL1NldHRlciBnZW5lcmF0aW9uXG5cdCAqL1xuXHRteS5nZXQgPSBmdW5jdGlvbihwcm9wTmFtZSwgZ2V0dGVyKSB7XG5cdFx0aWYgKCFnZXR0ZXIpIHtcblx0XHRcdGdldHRlciA9IGZ1bmN0aW9uKCkge1xuXHRcdFx0XHRyZXR1cm4gbXlbcHJvcE5hbWVdO1xuXHRcdFx0fTtcblx0XHR9XG5cdFx0dGhhdFtcImdldFwiICsgY2FwaXRhbGl6ZWQocHJvcE5hbWUpXSA9IGdldHRlcjtcblx0fTtcblxuXHRteS5zZXQgPSBmdW5jdGlvbihwcm9wTmFtZSwgc2V0dGVyKSB7XG5cdFx0aWYgKCFzZXR0ZXIpIHtcblx0XHRcdHNldHRlciA9IGZ1bmN0aW9uKHZhbHVlKSB7XG5cdFx0XHRcdG15W3Byb3BOYW1lXSA9IHZhbHVlO1xuXHRcdFx0XHRyZXR1cm4gdmFsdWU7XG5cdFx0XHR9O1xuXHRcdH1cblx0XHR0aGF0W1wic2V0XCIgKyBjYXBpdGFsaXplZChwcm9wTmFtZSldID0gc2V0dGVyO1xuXHR9O1xuXG5cdC8vIGluc3RhbGwgZXh0ZW5zaW9ucyBieSBoYW5kIGZvciBvYmplY3QsIHNpbmNlIHdlIGRvIG5vdCBoYXZlIHRoZVxuXHQvLyBleHRlbnNpb24gaW5zdGFsbGF0aW9uIG9mIHRoZSBzdWJjbGFzc2VzXG5cdHRoYXQuZ2V0Q2xhc3MoKS5leHRlbnNpb25zLmZvckVhY2goZnVuY3Rpb24oZXh0ZW5zaW9uKSB7XG5cdFx0ZXh0ZW5zaW9uKHRoYXQsIG15KTtcblx0fSk7XG5cblx0cmV0dXJuIHRoYXQ7XG59XG5cbi8qKlxuICogUmV0dXJuIGFuIGFycmF5IG9mIGRpcmVjdCBzdWJjbGFzc2VzLlxuICovXG5vYmplY3Quc3ViY2xhc3NlcyA9IFtdO1xuXG4vKipcbiAqIFJldHVybiBhbiBhcnJheSBvZiBhbGwgc3ViY2xhc3Nlcy5cbiAqL1xub2JqZWN0LmFsbFN1YmNsYXNzZXMgPSBmdW5jdGlvbigpIHtcblx0bGV0IGFsbFN1YmNsYXNzZXMgPSB0aGlzLnN1YmNsYXNzZXMuc2xpY2UoKTtcblx0dGhpcy5zdWJjbGFzc2VzLmZvckVhY2goZnVuY3Rpb24oa2xhc3MpIHtcblx0XHRrbGFzcy5hbGxTdWJjbGFzc2VzKCkuZm9yRWFjaChmdW5jdGlvbihzdWJjbGFzcykge1xuXHRcdFx0YWxsU3ViY2xhc3Nlcy5wdXNoKHN1YmNsYXNzKTtcblx0XHR9KTtcblx0fSk7XG5cdHJldHVybiBhbGxTdWJjbGFzc2VzO1xufTtcblxuLyoqXG4gKiBSZXR1cm4gYWxsIGNvbmNyZXRlIHN1YmNsYXNzZXMuXG4gKi9cbm9iamVjdC5hbGxDb25jcmV0ZVN1YmNsYXNzZXMgPSBmdW5jdGlvbigpIHtcblx0bGV0IGFsbENvbmNyZXRlU3ViY2xhc3NlcyA9IHRoaXMuc3ViY2xhc3Nlcy5maWx0ZXIoZnVuY3Rpb24oa2xhc3MpIHtcblx0XHRyZXR1cm4gIWtsYXNzLmlzQWJzdHJhY3Q7XG5cdH0pO1xuXG5cdHRoaXMuc3ViY2xhc3Nlcy5mb3JFYWNoKGZ1bmN0aW9uKGtsYXNzKSB7XG5cdFx0a2xhc3MuYWxsQ29uY3JldGVTdWJjbGFzc2VzKCkuZm9yRWFjaChmdW5jdGlvbihzdWJjbGFzcykge1xuXHRcdFx0YWxsQ29uY3JldGVTdWJjbGFzc2VzLnB1c2goc3ViY2xhc3MpO1xuXHRcdH0pO1xuXHR9KTtcblxuXHRyZXR1cm4gYWxsQ29uY3JldGVTdWJjbGFzc2VzO1xufTtcblxub2JqZWN0LnN1YmNsYXNzUmVzcG9uc2liaWxpdHkgPSBzdWJjbGFzc1Jlc3BvbnNpYmlsaXR5O1xuXG4vKipcbiAqIFJldHVybiBhbiBhcnJheSBvZiBhbGwgZXh0ZW5zaW9ucyBvZiB0aGUgY2xhc3MsIHNlZSBgb2JqZWN0LmV4dGVuZGAuXG4gKi9cbm9iamVjdC5leHRlbnNpb25zID0gW107XG5cbmxldCBzdXBlckNhbGxSZWdleCA9IC9cXGJzdXBlclxcYi87XG5cbi8qKlxuICogUmV0dXJuIGEgbmV3IHN1YmNsYXNzLCBhbmQgcmVnaXN0ZXIgaXQgdG8gdGhlIGFycmF5IG9mIGBzdWJjbGFzc2VzYC5cbiAqXG4gKiBAcGFyYW17ZnVuY3Rpb259IGJ1aWxkZXIgRnVuY3Rpb24gdXNlZCB0byBidWlsZCBuZXcgaW5zdGFuY2VzIG9mIHRoZVxuICogc3ViY2xhc3MuXG4gKi9cbm9iamVjdC5zdWJjbGFzcyA9IGZ1bmN0aW9uKGJ1aWxkZXIpIHtcblx0bGV0IHRoYXQgPSB0aGlzO1xuXG5cdGZ1bmN0aW9uIGtsYXNzKHNwZWMsIG15LCBub3RGaW5hbCkge1xuXHRcdHNwZWMgPSBzcGVjIHx8IHt9O1xuXHRcdG15ID0gbXkgfHwge307XG5cblx0XHRpZiAoa2xhc3MuaXNBYnN0cmFjdCAmJiAhbm90RmluYWwpIHtcblx0XHRcdHRocm93QWJzdHJhY3RDbGFzc0Vycm9yKHRoYXQpO1xuXHRcdH1cblxuXHRcdGlmIChrbGFzcy5pc1NpbmdsZXRvbiAmJiAhbm90RmluYWwpIHtcblx0XHRcdHRocm93U2luZ2xldG9uQ2xhc3NFcnJvcih0aGF0KTtcblx0XHR9XG5cblx0XHRsZXQgaW5zdGFuY2UgPSB0aGF0KHNwZWMsIG15LCB0cnVlKTtcblxuXHRcdGluc3RhbmNlLmdldENsYXNzID0gZnVuY3Rpb24oKSB7XG5cdFx0XHRyZXR1cm4ga2xhc3M7XG5cdFx0fTtcblxuXHRcdGxldCBzdXBlckluc3RhbmNlID0gT2JqZWN0LmFzc2lnbih7fSwgaW5zdGFuY2UpO1xuXHRcdGxldCBzdXBlck15ID0gT2JqZWN0LmFzc2lnbih7fSwgbXkpO1xuXG5cdFx0a2xhc3MuZXh0ZW5zaW9ucy5mb3JFYWNoKGZ1bmN0aW9uKGV4dGVuc2lvbikge1xuXHRcdFx0ZXh0ZW5zaW9uKGluc3RhbmNlLCBteSk7XG5cdFx0fSk7XG5cblx0XHRidWlsZGVyKGluc3RhbmNlLCBteSk7XG5cblx0XHRpZiAoc3VwZXJDYWxsUmVnZXgudGVzdChidWlsZGVyKSkge1xuXHRcdFx0aW5zdGFsbFN1cGVyKG15LCBzdXBlck15LCBrbGFzcywgXCJteVwiKTtcblx0XHRcdGluc3RhbGxTdXBlcihpbnN0YW5jZSwgc3VwZXJJbnN0YW5jZSwga2xhc3MsIFwidGhhdFwiKTtcblx0XHR9XG5cblx0XHRpZiAoIW5vdEZpbmFsKSB7XG5cdFx0XHRteS5wcmVJbml0aWFsaXplKHNwZWMpO1xuXHRcdFx0bXkuaW5pdGlhbGl6ZShzcGVjKTtcblx0XHRcdG15LnBvc3RJbml0aWFsaXplKHNwZWMpO1xuXHRcdH1cblxuXHRcdHJldHVybiBpbnN0YW5jZTtcblx0fVxuXG5cdGtsYXNzLnN1cGVyY2xhc3MgPSB0aGF0O1xuXHRrbGFzcy5zdWJjbGFzc2VzID0gW107XG5cdHRoYXQuc3ViY2xhc3Nlcy5wdXNoKGtsYXNzKTtcblxuXHQvLyBzdGF0aWMgaW5oZXJpdGFuY2Vcblx0a2xhc3MuY2xhc3NCdWlsZGVyID0gdGhhdC5jbGFzc0J1aWxkZXI7XG5cdGtsYXNzLmNsYXNzQnVpbGRlcihrbGFzcyk7XG5cblx0cmV0dXJuIGtsYXNzO1xufTtcblxub2JqZWN0LnNpbmdsZXRvblN1YmNsYXNzID0gZnVuY3Rpb24oYnVpbGRlcikge1xuXHRsZXQga2xhc3MgPSB0aGlzLnN1YmNsYXNzKGJ1aWxkZXIpO1xuXHRsZXQgaW5zdGFuY2UgPSBrbGFzcygpO1xuXHRrbGFzcy5pc1NpbmdsZXRvbiA9IHRydWU7XG5cdGtsYXNzLmluc3RhbmNlID0gZnVuY3Rpb24oKSB7XG5cdFx0cmV0dXJuIGluc3RhbmNlO1xuXHR9O1xuXG5cdHJldHVybiBrbGFzcztcbn07XG5cbm9iamVjdC5hYnN0cmFjdFN1YmNsYXNzID0gZnVuY3Rpb24oYnVpbGRlcikge1xuXHRsZXQga2xhc3MgPSB0aGlzLnN1YmNsYXNzKGJ1aWxkZXIpO1xuXHRrbGFzcy5pc0Fic3RyYWN0ID0gdHJ1ZTtcblx0cmV0dXJuIGtsYXNzO1xufTtcblxub2JqZWN0LmNsYXNzID0gZnVuY3Rpb24oYnVpbGRlcikge1xuXHRsZXQgdGhhdCA9IHRoaXM7XG5cblx0aWYgKHRoYXQgPT09IG9iamVjdCkge1xuXHRcdHRocm93IG5ldyBFcnJvcihcIm9iamVjdCBjbGFzcyBzaG91bGQgbm90IGJlIGV4dGVuZGVkLlwiKTtcblx0fVxuXG5cdGxldCBzdXBlckNsYXNzQnVpbGRlciA9IHRoYXQuY2xhc3NCdWlsZGVyO1xuXHR0aGF0LmNsYXNzQnVpbGRlciA9IGZ1bmN0aW9uKGtsYXNzKSB7XG5cdFx0c3VwZXJDbGFzc0J1aWxkZXIoa2xhc3MpO1xuXHRcdGJ1aWxkZXIoa2xhc3MpO1xuXHR9O1xuXG5cdHRoYXQuY2xhc3NCdWlsZGVyKHRoYXQpO1xufTtcblxub2JqZWN0LmNsYXNzQnVpbGRlciA9IGZ1bmN0aW9uKHRoYXQpIHtcblx0Ly8gVE9ETzogdXNlIE9iamVjdC5hc3NpZ24/XG5cdHRoYXQuY2xhc3MgPSBvYmplY3QuY2xhc3M7XG5cdHRoYXQuc3ViY2xhc3MgPSBvYmplY3Quc3ViY2xhc3M7XG5cdHRoYXQuc2luZ2xldG9uU3ViY2xhc3MgPSBvYmplY3Quc2luZ2xldG9uU3ViY2xhc3M7XG5cdHRoYXQuYWJzdHJhY3RTdWJjbGFzcyA9IG9iamVjdC5hYnN0cmFjdFN1YmNsYXNzO1xuXHR0aGF0LmFsbFN1YmNsYXNzZXMgPSBvYmplY3QuYWxsU3ViY2xhc3Nlcztcblx0dGhhdC5hbGxDb25jcmV0ZVN1YmNsYXNzZXMgPSBvYmplY3QuYWxsQ29uY3JldGVTdWJjbGFzc2VzO1xuXHR0aGF0LnN1YmNsYXNzUmVzcG9uc2liaWxpdHkgPSBzdWJjbGFzc1Jlc3BvbnNpYmlsaXR5O1xuXHR0aGF0LmV4dGVuZCA9IG9iamVjdC5leHRlbmQ7XG5cdHRoYXQuZXh0ZW5zaW9ucyA9IFtdO1xufTtcblxuLyoqXG4gKiBNdXRhdGUgcHVibGljIGZ1bmN0aW9ucyBvZiBgb2JqYCB0aGF0IG1ha2UgdXNlIG9mIGBzdXBlcigpYCBieSBiaW5kaW5nXG4gKiBgc3VwZXJgIGZyb20gd2l0aGluIGVhY2ggcHVibGljIGZ1bmN0aW9uIG9mIGBvYmpgIHRvIHRoZSBmdW5jdGlvbiBpblxuICogYHByb3RvYC5cbiAqL1xuZnVuY3Rpb24gaW5zdGFsbFN1cGVyKG9iaiwgcHJvdG8sIGtsYXNzLCByZWNlaXZlck5hbWUpIHtcblx0bWV0aG9kc1dpdGhTdXBlckNhbGwob2JqLCBwcm90bywga2xhc3MsIHJlY2VpdmVyTmFtZSkuZm9yRWFjaChmdW5jdGlvbihuYW1lKSB7XG5cdFx0aWYgKCFvYmpbbmFtZV0uc3VwZXJJbnN0YWxsZWQpIHtcblx0XHRcdG9ialtuYW1lXSA9IChmdW5jdGlvbihvYmosIGZuLCBzdXBlckZuKSB7XG5cdFx0XHRcdHJldHVybiBmdW5jdGlvbigpIHtcblxuXHRcdFx0XHRcdGxldCB0bXAgPSBvYmouc3VwZXI7XG5cdFx0XHRcdFx0b2JqLnN1cGVyID0gc3VwZXJGbjtcblx0XHRcdFx0XHRsZXQgcmV0dXJuVmFsdWUgPSBmbi5hcHBseShvYmosIGFyZ3VtZW50cyk7XG5cdFx0XHRcdFx0b2JqLnN1cGVyID0gdG1wO1xuXG5cdFx0XHRcdFx0Ly8gV2UgcmVhY2hlZCB0aGUgdG9wIG9mIHRoZSBzdGFjayByZWdhcmRpbmcgc3VwZXJcblx0XHRcdFx0XHQvLyBjYWxscywgc28gY2xlYW51cCB0aGUgbmFtZXNwYWNlLlxuXHRcdFx0XHRcdGlmIChvYmouc3VwZXIgPT09IHVuZGVmaW5lZCkge1xuXHRcdFx0XHRcdFx0ZGVsZXRlIG9iai5zdXBlcjtcblx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHRyZXR1cm4gcmV0dXJuVmFsdWU7XG5cdFx0XHRcdH07XG5cdFx0XHR9KShvYmosIG9ialtuYW1lXSwgcHJvdG9bbmFtZV0pO1xuXHRcdFx0b2JqW25hbWVdLnN1cGVySW5zdGFsbGVkID0gdHJ1ZTtcblx0XHR9XG5cdH0pO1xufVxuXG4vKipcbiAqIFJldHVybiB0aGUgbGlzdCBvZiBtZXRob2RzIGluIGBvYmpgIHRoYXQgcGVyZm9ybSBhIHN1cGVyY2FsbCB0byBgcHJvdG9gLlxuICogVGhlIGxpc3QgaXMgY2FjaGVkIGluIGBrbGFzc2AuXG4gKlxuICogYHJlY2VpdmVyTmFtZWAgaXMgZWl0aGVyIFwidGhhdFwiIG9yIFwibXlcIi5cbiAqL1xuZnVuY3Rpb24gbWV0aG9kc1dpdGhTdXBlckNhbGwob2JqLCBwcm90bywga2xhc3MsIHJlY2VpdmVyTmFtZSkge1xuXHRpZiAoIWtsYXNzLm1ldGhvZHNXaXRoU3VwZXJDYWxsKSB7XG5cdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGtsYXNzLCBcIm1ldGhvZHNXaXRoU3VwZXJDYWxsXCIsIHtcblx0XHRcdGVudW1lcmFibGU6IGZhbHNlLFxuXHRcdFx0d3JpdGFibGU6IHRydWUsXG5cdFx0XHR2YWx1ZToge31cblx0XHR9KTtcblx0fVxuXG5cdGlmIChrbGFzcy5tZXRob2RzV2l0aFN1cGVyQ2FsbFtyZWNlaXZlck5hbWVdKSB7XG5cdFx0cmV0dXJuIGtsYXNzLm1ldGhvZHNXaXRoU3VwZXJDYWxsW3JlY2VpdmVyTmFtZV07XG5cdH1cblxuXHRrbGFzcy5tZXRob2RzV2l0aFN1cGVyQ2FsbFtyZWNlaXZlck5hbWVdID0gT2JqZWN0LmtleXMob2JqKS5maWx0ZXIoZnVuY3Rpb24obmFtZSkge1xuXHRcdHJldHVybiB0eXBlb2YocHJvdG9bbmFtZV0pID09PSBcImZ1bmN0aW9uXCIgJiZcblx0XHRcdHR5cGVvZihvYmpbbmFtZV0pID09PSBcImZ1bmN0aW9uXCIgJiZcblx0XHRcdHN1cGVyQ2FsbFJlZ2V4LnRlc3Qob2JqW25hbWVdKTtcblx0fSk7XG5cblx0cmV0dXJuIGtsYXNzLm1ldGhvZHNXaXRoU3VwZXJDYWxsW3JlY2VpdmVyTmFtZV07XG59XG5cbi8qKlxuICogRXh0ZW5kIHRoZSBjbGFzcyB3aXRoIG5ldyBtZXRob2RzL3Byb3BlcnRpZXMuXG4gKiBAcGFyYW17ZnVuY3Rpb259IGJ1aWxkZXIgdGFrZXMgdGhlIHNhbWUgYXJndW1lbnRzIGFzXG4gKiBgb2JqZWN0LnN1YmNsYXNzYDogYHRoYXRgLCBgc3BlY2AgYW5kIGBteWAuXG4gKi9cbm9iamVjdC5leHRlbmQgPSBmdW5jdGlvbihidWlsZGVyKSB7XG5cdHRoaXMuZXh0ZW5zaW9ucy5wdXNoKGJ1aWxkZXIpO1xufTtcblxuZnVuY3Rpb24gdGhyb3dBYnN0cmFjdENsYXNzRXJyb3Ioa2xhc3MpIHtcblx0dGhyb3cgbmV3IEVycm9yKFwiQ2Fubm90IGluc3RhbnRpYXRlIGFuIGFic3RyYWN0IGNsYXNzXCIpO1xufVxuXG5mdW5jdGlvbiB0aHJvd1NpbmdsZXRvbkNsYXNzRXJyb3Ioa2xhc3MpIHtcblx0dGhyb3cgbmV3IEVycm9yKFwiQ2Fubm90IGNyZWF0ZSBuZXcgaW5zdGFuY2VzIG9mIGEgc2luZ2xldG9uIGNsYXNzLCB1c2UgYGluc3RhbmNlYCBpbnN0ZWFkLlwiKTtcbn1cblxuLyoqXG4gKiBQb2x5ZmlsbCBmb3IgT2JqZWN0LmFzc2lnblxuICovXG5pZiAodHlwZW9mIE9iamVjdC5hc3NpZ24gIT09IFwiZnVuY3Rpb25cIikge1xuXHQoZnVuY3Rpb24oKSB7XG5cdFx0T2JqZWN0LmFzc2lnbiA9IGZ1bmN0aW9uKHRhcmdldCkge1xuXHRcdFx0aWYgKHRhcmdldCA9PT0gdW5kZWZpbmVkIHx8IHRhcmdldCA9PT0gbnVsbCkge1xuXHRcdFx0XHR0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IGNvbnZlcnQgdW5kZWZpbmVkIG9yIG51bGwgdG8gb2JqZWN0XCIpO1xuXHRcdFx0fVxuXG5cdFx0XHRsZXQgb3V0cHV0ID0gT2JqZWN0KHRhcmdldCk7XG5cdFx0XHRmb3IgKGxldCBpbmRleCA9IDE7IGluZGV4IDwgYXJndW1lbnRzLmxlbmd0aDsgaW5kZXgrKykge1xuXHRcdFx0XHRsZXQgc291cmNlID0gYXJndW1lbnRzW2luZGV4XTtcblx0XHRcdFx0aWYgKHNvdXJjZSAhPT0gdW5kZWZpbmVkICYmIHNvdXJjZSAhPT0gbnVsbCkge1xuXHRcdFx0XHRcdGZvciAobGV0IG5leHRLZXkgaW4gc291cmNlKSB7XG5cdFx0XHRcdFx0XHRpZiAoc291cmNlLmhhc093blByb3BlcnR5KG5leHRLZXkpKSB7XG5cdFx0XHRcdFx0XHRcdG91dHB1dFtuZXh0S2V5XSA9IHNvdXJjZVtuZXh0S2V5XTtcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHRcdHJldHVybiBvdXRwdXQ7XG5cdFx0fTtcblx0fSkoKTtcbn1cblxuLyoqXG4gKiBIZWxwZXJzXG4gKi9cblxuZnVuY3Rpb24gY2FwaXRhbGl6ZWQoc3RyaW5nKSB7XG5cdHJldHVybiBzdHJpbmdbMF0udG9VcHBlckNhc2UoKSArIHN0cmluZy5zbGljZSgxKTtcbn1cblxuLyoqXG4gKiBUaHJvdyBhbiBlcnJvciB3aGVuIGEgbWV0aG9kIHNob3VsZCBoYXZlIGJlZW4gb3ZlcnJpZGRlbiBpbiBhIGNvbmNyZXRlXG4gKiBzdWJjbGFzcy5cbiAqL1xuZnVuY3Rpb24gc3ViY2xhc3NSZXNwb25zaWJpbGl0eSgpIHtcblx0dGhyb3cgbmV3IEVycm9yKFwiU3ViY2xhc3MgcmVzcG9uc2liaWxpdHlcIik7XG59XG5cbmV4cG9ydCBkZWZhdWx0IG9iamVjdDtcbiIsImltcG9ydCBvYmplY3QgZnJvbSBcIi4vb2JqZWN0XCI7XG5cbmV4cG9ydCBkZWZhdWx0IG9iamVjdC5zdWJjbGFzcyhmdW5jdGlvbih0aGF0LCBteSkge1xuXHRteS5pbml0aWFsaXplID0gZnVuY3Rpb24oc3BlYykge1xuXHRcdG15LnN1cGVyKHNwZWMpO1xuXHRcdG15Lmluc3RhbmNlID0gc3BlYy5pbnN0YW5jZTtcblxuXHRcdG15LmFjY2Vzc0xpc3RlbmVycyA9IHt9O1xuXHRcdG15LmNoYW5nZUxpc3RlbmVycyA9IHt9O1xuXHR9O1xuXG5cdHRoYXQub25BY2Nlc3MgPSBmdW5jdGlvbihwcm9wTmFtZSwgbGlzdGVuZXIpIHtcblx0XHRpZiAoIW15LmFjY2Vzc0xpc3RlbmVyc1twcm9wTmFtZV0pIHtcblx0XHRcdG15LmFjY2Vzc0xpc3RlbmVyc1twcm9wTmFtZV0gPSBbXTtcblx0XHR9XG5cdFx0aWYgKG15LmFjY2Vzc0xpc3RlbmVyc1twcm9wTmFtZV0uaW5kZXhPZihsaXN0ZW5lcikgPT09IC0xKSB7XG5cdFx0XHRteS5hY2Nlc3NMaXN0ZW5lcnNbcHJvcE5hbWVdLnB1c2gobGlzdGVuZXIpO1xuXHRcdH1cblx0fTtcblxuXHR0aGF0Lm9uQ2hhbmdlID0gZnVuY3Rpb24ocHJvcE5hbWUsIGxpc3RlbmVyKSB7XG5cdFx0aWYgKCFteS5jaGFuZ2VMaXN0ZW5lcnNbcHJvcE5hbWVdKSB7XG5cdFx0XHRteS5jaGFuZ2VMaXN0ZW5lcnNbcHJvcE5hbWVdID0gW107XG5cdFx0fVxuXHRcdGlmIChteS5jaGFuZ2VMaXN0ZW5lcnNbcHJvcE5hbWVdLmluZGV4T2YobGlzdGVuZXIpID09PSAtMSkge1xuXHRcdFx0bXkuY2hhbmdlTGlzdGVuZXJzW3Byb3BOYW1lXS5wdXNoKGxpc3RlbmVyKTtcblx0XHR9XG5cdH07XG5cblx0dGhhdC5lbWl0QWNjZXNzID0gZnVuY3Rpb24ocHJvcE5hbWUpIHtcblx0XHRpZiAoIW15LmFjY2Vzc0xpc3RlbmVyc1twcm9wTmFtZV0pIHtcblx0XHRcdHJldHVybjtcblx0XHR9XG5cblx0XHRteS5hY2Nlc3NMaXN0ZW5lcnNbcHJvcE5hbWVdLmZvckVhY2goZnVuY3Rpb24obGlzdGVuZXIpIHtcblx0XHRcdGxpc3RlbmVyKG15Lmluc3RhbmNlLCBwcm9wTmFtZSk7XG5cdFx0fSk7XG5cdH07XG5cblx0dGhhdC5lbWl0Q2hhbmdlID0gZnVuY3Rpb24ocHJvcE5hbWUsIHZhbHVlKSB7XG5cdFx0aWYgKCFteS5jaGFuZ2VMaXN0ZW5lcnNbcHJvcE5hbWVdKSB7XG5cdFx0XHRyZXR1cm47XG5cdFx0fVxuXG5cdFx0bXkuY2hhbmdlTGlzdGVuZXJzW3Byb3BOYW1lXS5mb3JFYWNoKGZ1bmN0aW9uKGxpc3RlbmVyKSB7XG5cdFx0XHRsaXN0ZW5lcihteS5pbnN0YW5jZSwgcHJvcE5hbWUsIHZhbHVlKTtcblx0XHR9KTtcblx0fTtcbn0pO1xuIiwiaW1wb3J0IG9iamVjdCBmcm9tIFwiLi9vYmplY3RcIjtcbmltcG9ydCBwcm9wZXJ0aWVzRXZlbnRFbWl0dGVyIGZyb20gXCIuL3Byb3BlcnRpZXNFdmVudEVtaXR0ZXJcIjtcbmltcG9ydCBnbG9iYWxQcm9wZXJ0eUV2ZW50RW1pdHRlciBmcm9tIFwiLi9nbG9iYWxQcm9wZXJ0eUV2ZW50RW1pdHRlclwiO1xuXG4vKipcbiAqIEEgcHJvcGVydHkgcmVwcmVzZW50IGFuIG9ic2VydmFibGUgYXR0cmlidXRlIG9mIGFuIG9iamVjdCwgd2l0aCBvcHRpb25hbFxuICogZ2V0dGVycyBhbmQgc2V0dGVycy5cbiAqXG4gKiBAcGFyYW17c3RyaW5nfSBzcGVjLm93bmVyIC0gSW5zdGFuY2Ugb24gd2hpY2ggdGhlIHByb3BlcnR5IGlzIGluc3RhbGxlZC5cbiAqIEBwYXJhbXtzdHJpbmd9IHNwZWMubmFtZSAtIE5hbWUgb2YgdGhlIHByb3BlcnR5LCB3aGljaCB2YWx1ZSBvZiB0aGUgc2FtZVxuICogbmFtZSBpcyBpbnN0YWxsZWQgb24gYG15YCBvbiB0aGUgaW5zdGFuY2UuXG4gKi9cbm9iamVjdC5leHRlbmQoZnVuY3Rpb24odGhhdCwgbXkpIHtcblx0dGhhdC5vblByb3BlcnR5QWNjZXNzID0gZnVuY3Rpb24ocHJvcE5hbWUsIGxpc3RlbmVyKSB7XG5cdFx0bGV0IGVtaXR0ZXIgPSBteS5lbnN1cmVQcm9wZXJ0aWVzRXZlbnRFbWl0dGVyKCk7XG5cdFx0ZW1pdHRlci5vbkFjY2Vzcyhwcm9wTmFtZSwgbGlzdGVuZXIpO1xuXHR9O1xuXG5cdHRoYXQub25Qcm9wZXJ0eUNoYW5nZSA9IGZ1bmN0aW9uKHByb3BOYW1lLCBsaXN0ZW5lcikge1xuXHRcdGxldCBlbWl0dGVyID0gbXkuZW5zdXJlUHJvcGVydGllc0V2ZW50RW1pdHRlcigpO1xuXHRcdGVtaXR0ZXIub25DaGFuZ2UocHJvcE5hbWUsIGxpc3RlbmVyKTtcblx0fTtcblxuXHRteS5wcm9wZXJ0eSA9IGZ1bmN0aW9uKHByb3BOYW1lLCBpbml0aWFsVmFsdWUpIHtcblx0XHRsZXQgdmFsdWUgPSBpbml0aWFsVmFsdWU7XG5cdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KG15LCBwcm9wTmFtZSwge1xuXHRcdFx0Y29uZmlndXJhYmxlOiB0cnVlLFxuXHRcdFx0ZW51bWVyYWJsZTogdHJ1ZSxcblx0XHRcdGdldDogZnVuY3Rpb24oKSB7XG5cdFx0XHRcdGVtaXRQcm9wZXJ0eUFjY2Vzcyhwcm9wTmFtZSk7XG5cdFx0XHRcdHJldHVybiB2YWx1ZTtcblx0XHRcdH0sXG5cdFx0XHRzZXQ6IGZ1bmN0aW9uKG5ld1ZhbHVlKSB7XG5cdFx0XHRcdHZhbHVlID0gbmV3VmFsdWU7XG5cdFx0XHRcdGVtaXRQcm9wZXJ0eUNoYW5nZShwcm9wTmFtZSwgdmFsdWUpO1xuXHRcdFx0fVxuXHRcdH0pO1xuXHR9O1xuXG5cdG15LmVuc3VyZVByb3BlcnRpZXNFdmVudEVtaXR0ZXIgPSBmdW5jdGlvbigpIHtcblx0XHRpZiAobXkucHJvcGVydGllc0V2ZW50RW1pdHRlcikge1xuXHRcdFx0cmV0dXJuIG15LnByb3BlcnRpZXNFdmVudEVtaXR0ZXI7XG5cdFx0fVxuXG5cdFx0bXkucHJvcGVydGllc0V2ZW50RW1pdHRlciA9IHByb3BlcnRpZXNFdmVudEVtaXR0ZXIoe1xuXHRcdFx0aW5zdGFuY2U6IHRoYXRcblx0XHR9KTtcblxuXHRcdHJldHVybiBteS5wcm9wZXJ0aWVzRXZlbnRFbWl0dGVyO1xuXHR9O1xuXG5cdGZ1bmN0aW9uIGVtaXRQcm9wZXJ0eUFjY2Vzcyhwcm9wTmFtZSkge1xuXHRcdGxldCBlbWl0dGVyID0gbXkuZW5zdXJlUHJvcGVydGllc0V2ZW50RW1pdHRlcigpO1xuXHRcdGVtaXR0ZXIuZW1pdEFjY2Vzcyhwcm9wTmFtZSk7XG5cdFx0Z2xvYmFsUHJvcGVydHlFdmVudEVtaXR0ZXIuaW5zdGFuY2UoKS5lbWl0QWNjZXNzKHRoYXQsIHByb3BOYW1lKTtcblx0fVxuXG5cdGZ1bmN0aW9uIGVtaXRQcm9wZXJ0eUNoYW5nZShwcm9wTmFtZSwgdmFsdWUpIHtcblx0XHRsZXQgZW1pdHRlciA9IG15LmVuc3VyZVByb3BlcnRpZXNFdmVudEVtaXR0ZXIoKTtcblx0XHRlbWl0dGVyLmVtaXRDaGFuZ2UocHJvcE5hbWUsIHZhbHVlKTtcblx0XHRnbG9iYWxQcm9wZXJ0eUV2ZW50RW1pdHRlci5pbnN0YW5jZSgpLmVtaXRDaGFuZ2UodGhhdCwgcHJvcE5hbWUsIHZhbHVlKTtcblx0fVxufSk7XG4iLCIvKiBlc2xpbnQgamFzbWluZS9uby1nbG9iYWwtc2V0dXA6IDAgKi9cbmltcG9ydCBvYmplY3QgZnJvbSBcIi4vb2JqZWN0XCI7XG5cbi8qKlxuICogYHRlc3RDYXNlYCBpbXBsZW1lbnRzIGFuIGFic3RyYWN0IHRlc3QgY2xhc3MsIHVzaW5nIEphc21pbmUgYmVoaW5kIHRoZVxuICogc2NlbmVzLlxuICpcbiAqIEFsbCBzdWJjbGFzc2VzIG9mIHRlc3RDYXNlIGFyZSBzaW5nbGV0b25zIChzbyB0aGF0IG9uZSBpbnN0YW5jZSBpc1xuICogY3JlYXRlZCB3aGVuIHRoZSBjbGFzcyBpcyBsb2FkZWQpLlxuICovXG5sZXQgdGVzdENhc2UgPSBvYmplY3QuYWJzdHJhY3RTdWJjbGFzcyhmdW5jdGlvbih0aGF0LCBteSkge1xuXG5cdG15LmluaXRpYWxpemUgPSBmdW5jdGlvbihzcGVjKSB7XG5cdFx0bXkuc3VwZXIoc3BlYyk7XG5cdFx0bGV0IHRlc3RzID0gbXkucmVnaXN0ZXJlZFRlc3RzKCk7XG5cdFx0c3VpdGUobXkubmFtZSgpLCBmdW5jdGlvbigpIHtcblx0XHRcdGJlZm9yZUVhY2gobXkuYmVmb3JlRWFjaCk7XG5cdFx0XHRhZnRlckVhY2gobXkuYWZ0ZXJFYWNoKTtcblx0XHRcdGJlZm9yZUFsbChteS5iZWZvcmVBbGwpO1xuXHRcdFx0YWZ0ZXJBbGwobXkuYWZ0ZXJBbGwpO1xuXHRcdFx0dGVzdHMuZm9yRWFjaChmdW5jdGlvbih0ZXN0KSB7XG5cdFx0XHRcdGl0KHRlc3QubmFtZSwgdGVzdC5mbik7XG5cdFx0XHR9KTtcblx0XHR9KTtcblx0fTtcblxuXHRteS5mb3JjZSA9IGZ1bmN0aW9uKCkge1xuXHRcdHJldHVybiBmYWxzZTtcblx0fTtcblxuXHRteS5iZWZvcmVFYWNoID0gZnVuY3Rpb24oKSB7fTtcblx0bXkuYmVmb3JlQWxsID0gZnVuY3Rpb24oKSB7fTtcblx0bXkuYWZ0ZXJFYWNoID0gZnVuY3Rpb24oKSB7fTtcblx0bXkuYWZ0ZXJBbGwgPSBmdW5jdGlvbigpIHt9O1xuXG5cdG15Lm5hbWUgPSBmdW5jdGlvbigpIHtcblx0XHRyZXR1cm4gbXkuc3ViY2xhc3NSZXNwb25zaWJpbGl0eSgpO1xuXHR9O1xuXG5cdG15LmV4cGVjdCA9IGV4cGVjdDtcblx0bXkuc3B5T24gPSBzcHlPbjtcblxuXHRteS5yZWdpc3RlcmVkVGVzdHMgPSBmdW5jdGlvbigpIHtcblx0XHRsZXQgcmVzdWx0ID0gW107XG5cdFx0bGV0IHRlc3RSZWdleCA9IC9UZXN0JC87XG5cblx0XHRPYmplY3Qua2V5cyhteSkuZm9yRWFjaChmdW5jdGlvbihuYW1lKSB7XG5cdFx0XHRpZiAodHlwZW9mIG15W25hbWVdID09PSBcImZ1bmN0aW9uXCIgJiZcblx0XHRcdFx0dGVzdFJlZ2V4LnRlc3QobmFtZSkpIHtcblx0XHRcdFx0cmVzdWx0LnB1c2goe1xuXHRcdFx0XHRcdG5hbWU6IG15LmJ1aWxkVGVzdE5hbWUobmFtZSksXG5cdFx0XHRcdFx0Zm46IG15W25hbWVdXG5cdFx0XHRcdH0pO1xuXHRcdFx0fVxuXHRcdH0pO1xuXG5cdFx0cmV0dXJuIHJlc3VsdDtcblx0fTtcblxuXHRteS5idWlsZFRlc3ROYW1lID0gZnVuY3Rpb24obmFtZSkge1xuXHRcdG5hbWUgPSBuYW1lLnNsaWNlKDAsIC00KTtcblx0XHRsZXQgcmVnZXhwID0gLyhbQS1aXVteQS1aXSopL2c7XG5cdFx0bmFtZSA9IG5hbWUucmVwbGFjZShyZWdleHAsIFwiICQxXCIpO1xuXHRcdG5hbWUgPSBuYW1lLnRvTG93ZXJDYXNlKCk7XG5cdFx0cmV0dXJuIG5hbWU7XG5cdH07XG5cblx0ZnVuY3Rpb24gc3VpdGUobmFtZSwgY2FsbGJhY2spIHtcblx0XHRpZiAobXkuZm9yY2UoKSkge1xuXHRcdFx0ZmRlc2NyaWJlKG5hbWUsIGZ1bmN0aW9uKCkgeyAvLyBlc2xpbnQtZGlzYWJsZS1saW5lIGphc21pbmUvbm8tZm9jdXNlZC10ZXN0c1xuXHRcdFx0XHRjYWxsYmFjaygpO1xuXHRcdFx0fSk7XG5cdFx0fSBlbHNlIHtcblx0XHRcdGRlc2NyaWJlKG5hbWUsIGZ1bmN0aW9uKCkge1xuXHRcdFx0XHRjYWxsYmFjaygpO1xuXHRcdFx0fSk7XG5cdFx0fVxuXHR9XG59KTtcblxudGVzdENhc2UuY2xhc3MoZnVuY3Rpb24odGhhdCkge1xuXHR0aGF0LmlzVGVzdENhc2UgPSBmdW5jdGlvbigpIHtcblx0XHRyZXR1cm4gdHJ1ZTtcblx0fTtcblxuXHQvLyBBbGwgdGVzdCBjbGFzc2VzIGFyZSBzaW5nbGV0b25zLlxuXHQvLyBUT0RPOiBSZWZhY3RvciB3aXRoIGEgc3VwZXIgY2FsbCB3aGVuIHdlXCJsbCBoYXZlIHN1cGVyIG9uIGNsYXNzLXNpZGUuXG5cdHRoYXQuc3ViY2xhc3MgPSAoZnVuY3Rpb24oc3VwZXJTdWJjbGFzcykge1xuXHRcdHJldHVybiBmdW5jdGlvbihidWlsZGVyLCBvcHRpb25zKSB7XG5cdFx0XHRsZXQga2xhc3MgPSBzdXBlclN1YmNsYXNzLmFwcGx5KHRoYXQsIFtidWlsZGVyXSk7XG5cblx0XHRcdGlmIChvcHRpb25zICYmIG9wdGlvbnMuaXNBYnN0cmFjdCkge1xuXHRcdFx0XHRyZXR1cm4ga2xhc3M7XG5cdFx0XHR9XG5cblx0XHRcdGxldCBpbnN0YW5jZSA9IGtsYXNzKCk7XG5cdFx0XHRrbGFzcy5pc1NpbmdsZXRvbiA9IHRydWU7XG5cdFx0XHRrbGFzcy5pbnN0YW5jZSA9IGZ1bmN0aW9uKCkge1xuXHRcdFx0XHRyZXR1cm4gaW5zdGFuY2U7XG5cdFx0XHR9O1xuXG5cdFx0XHRyZXR1cm4ga2xhc3M7XG5cdFx0fTtcblx0fSkodGhhdC5zdWJjbGFzcyk7XG5cblx0Ly8gV2UgbmVlZCB0aGlzIHRvIGVuc3VyZSB3ZSBkb24ndCBoYXZlIGFic3RyYWN0ICYgc2luZ2xldG9uIGNsYXNzZXNcblx0dGhhdC5hYnN0cmFjdFN1YmNsYXNzID0gKGZ1bmN0aW9uKHN1cGVyQWJzdHJhY3RTdWJjbGFzcykge1xuXHRcdHJldHVybiBmdW5jdGlvbihidWlsZGVyKSB7XG5cdFx0XHRsZXQga2xhc3MgPSB0aGlzLnN1YmNsYXNzKGJ1aWxkZXIsIHsgaXNBYnN0cmFjdDogdHJ1ZSB9KTtcblx0XHRcdGtsYXNzLmlzQWJzdHJhY3QgPSB0cnVlO1xuXHRcdFx0cmV0dXJuIGtsYXNzO1xuXHRcdH07XG5cblx0fSkodGhhdC5hYnN0cmFjdFN1YmNsYXNzKTtcbn0pO1xuXG5leHBvcnQgZGVmYXVsdCB0ZXN0Q2FzZTtcbiJdfQ=="}